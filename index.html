<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">
<meta property="og:type" content="website">
<meta property="og:title" content="为学日益，为道日损">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="为学日益，为道日损">
<meta property="og:description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="为学日益，为道日损">
<meta name="twitter:description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>


  <title> 为学日益，为道日损 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">为学日益，为道日损</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">欲路上事，勿乐其便而姑为染指，一染指便深入万仞。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/03/计算机输入输出系统汇编实验报告/" itemprop="url">
                  计算机输入输出系统汇编实验报告
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-03T15:13:14+08:00" content="2017-06-03">
              2017-06-03
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/03/计算机输入输出系统汇编实验报告/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/03/计算机输入输出系统汇编实验报告/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/06/03/计算机输入输出系统汇编实验报告/" class="leancloud_visitors" data-flag-title="计算机输入输出系统汇编实验报告">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="实验一-汇编语言程序上机过程"><a href="#实验一-汇编语言程序上机过程" class="headerlink" title="实验一    汇编语言程序上机过程"></a><strong>实验一    汇编语言程序上机过程</strong></h1><h2 id="一）实验目的"><a href="#一）实验目的" class="headerlink" title="一）实验目的"></a>一）实验目的</h2><ul>
<li>学会安装“16位汇编程序开发软件”的安装，完成将汇编语言源程序录入进计算机、利用ml.exe进行汇编，LINK进行链接，并用DEBUG调试16位程序的全部过程。本实验大家不必了解程序细节，只是为了熟悉开发环境和上机过程。</li>
</ul>
<h2 id="二）实验内容"><a href="#二）实验内容" class="headerlink" title="二）实验内容"></a>二）实验内容</h2><blockquote>
<p>写16位汇编程序，从键盘输入一个字符串，然后换行后将该字符串输出到屏幕。</p>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.DATA</div><div class="line">ORG 100H;CS起始地址</div><div class="line">STR DB 20,0,20 DUP(20H);字符串STR</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">	MOV AX,@DATA</div><div class="line">	MOV DS,AX;数据段地址</div><div class="line">	LEA DX,STR;将STR的相对于数据段首地址的偏移地址放进DX</div><div class="line">	MOV AH,0AH</div><div class="line">	INT 21H;从键盘输入一个字符串</div><div class="line">	</div><div class="line">	MOV DL,0AH</div><div class="line">	MOV AH,02</div><div class="line">	INT 21H;输出DL中的换行</div><div class="line">	MOV DL,0DH</div><div class="line">	MOV AH,02</div><div class="line">	INT 21H;输出回车</div><div class="line">	</div><div class="line">	MOV BL,STR[1]</div><div class="line">	MOV BH,0;BX=20</div><div class="line">	MOV BYTE PTR STR[BX+2],&apos;$&apos;;末尾加&apos;$&apos;</div><div class="line">	LEA DX,STR+2</div><div class="line">	MOV AH,9</div><div class="line">	INT 21H;输出这一句话</div><div class="line">	MOV AH,4CH</div><div class="line">	INT 21H;返回DOS</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果贴图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/2/2.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p><code>INT 21</code>的9号调用输出以DS:DX为首地址，”\$”为结尾的字符串到显示器中。若要在显示字符串光标自动回车换行，则在”$”字符前面加上0DH(回车),0AH(换行)字符。</p>
</blockquote>
<h1 id="实验二-顺序程序设计"><a href="#实验二-顺序程序设计" class="headerlink" title="实验二    顺序程序设计"></a><strong>实验二    顺序程序设计</strong></h1><h2 id="一）实验目的-1"><a href="#一）实验目的-1" class="headerlink" title="一）实验目的"></a>一）实验目的</h2><blockquote>
<p>通过这一部分的实验，进一步熟悉汇编过程和DEBUG调试过程；掌握用汇编语言编写顺序程序。</p>
</blockquote>
<h2 id="二）实验内容-1"><a href="#二）实验内容-1" class="headerlink" title="二）实验内容"></a>二）实验内容</h2><blockquote>
<p>写完整程序16位程序，在内存中从Table开始的10个单元中连续存放0到9的平方值，任给一个0到9的数X，该数存放在内存单元XX中，用XLAT指令查表求X的平方值，并将结果存于内存YY单元中。编写程序，并在DEBUG中进行调试和验证结果。(X，XX，YY都是内存中的变量）</p>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    Table BYTE 0,1,4,9,16,25,36,49,64,81</div><div class="line">    XX BYTE 9</div><div class="line">    YY BYTE ?</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    LEA BX,Table</div><div class="line">    MOV AL,XX</div><div class="line">    XLAT;以DS:[BX+AL]为地址，提取存储器中的一个字节再送入AL。</div><div class="line">    MOV YY,AL</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果贴图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/3/31.png" alt=""></p>
<p>可以看到DS:000A放的是09H，查找后AL中放的是51H=81D，存入YY=DS:000B中。</p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>XLAT的指令功能：把待查表格的一个字节内容送到AL累加器中。在执行该指令前，应将Table先送至BX寄存器中，然后将待查字节与其在表格中距表首地址位移量送AL,即AL&lt;–((BX)+(AL)). 执行XLAT将使待查内容送到累加器。</p>
</blockquote>
<h1 id="实验三-分支程序设计"><a href="#实验三-分支程序设计" class="headerlink" title="实验三    分支程序设计"></a><strong>实验三    分支程序设计</strong></h1><h2 id="一）实验目的-2"><a href="#一）实验目的-2" class="headerlink" title="一）实验目的"></a>一）实验目的</h2><blockquote>
<p>通过本实验，熟练运算类指令对标志位状态的影响，以及标志位状态的表示方法；掌握无条件转移、条件转移指令的使用方法；掌握分支程序设计和调试方法。</p>
</blockquote>
<h2 id="二）实验内容-2"><a href="#二）实验内容-2" class="headerlink" title="二）实验内容"></a>二）实验内容</h2><blockquote>
<p>所谓回文字符串是指一个字符串正读和倒读都是一样的，例如字符串‘ABCDEFFEDCBA’就是一个回文字符串，而字符串‘ABCFDDCAB’就不是回文字符串。现在编写完整的16位汇编程序，输入一个字符串，判断该字符串是否为回文字符串，并用“It is a palindrome”或“It is NOT a palindrome”作为输出。</p>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    N EQU 20</div><div class="line">    MAXLEN BYTE N</div><div class="line">    ACTLEN BYTE ?</div><div class="line">    STRING BYTE N DUP(&apos;$&apos;)</div><div class="line">    TRUE BYTE 0AH,0DH,&apos;It is a palindrome&apos;,0AH,0DH,&apos;$&apos;	;开头加0AH、0DH是为了防止回车把输入冲掉</div><div class="line">    FALSE BYTE 0AH,0DH,&apos;It is NOT a palindrome&apos;,0AH,0DH,&apos;$&apos;</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    MOV AH,0AH</div><div class="line">    MOV DX,OFFSET MAXLEN</div><div class="line">    INT 21H;缓冲区的第一个字节指定容纳的最大字符个数，由用户给出；第二个字节存放实际的最大字符个数，由系统最后填入；从第三个字节开始存放从键盘接受的字符，直到ENTER键结束。</div><div class="line">    MOV AL,ACTLEN</div><div class="line">    MOV AH,0</div><div class="line">    MOV BL,2</div><div class="line">    DIV BL</div><div class="line">    CMP AH,1</div><div class="line">    JE ITSODD;如果是奇数字数的字符串，跳到&quot;It&apos;s odd&quot;</div><div class="line">    CMP AL,1</div><div class="line">    JE ITSTWO;如果是两个字符的字符串，跳到&quot;It&apos;s two&quot;</div><div class="line">    ADD AL,AH;奇数个数和偶数个数的区别就在这句话</div><div class="line">    MOV AH,0</div><div class="line">    MOV BL,ACTLEN</div><div class="line">    MOV BH,0</div><div class="line">    MOV SI,BX</div><div class="line">    MOV BX,OFFSET STRING</div><div class="line">    DEC SI</div><div class="line">ITSEVEN:</div><div class="line">    CMP SI,AX</div><div class="line">    JNA T</div><div class="line">    MOV DL,[BX+SI]</div><div class="line">    MOV DH,[BX]</div><div class="line">    CMP DL,DH</div><div class="line">    JNZ F</div><div class="line">    INC BX</div><div class="line">    SUB SI,2;因为BX加了一，所以BX+SI要想减一，就需要SI减二</div><div class="line">    JMP ITSEVEN</div><div class="line">ITSODD:</div><div class="line">    MOV AH,0</div><div class="line">    MOV BL,ACTLEN</div><div class="line">    MOV BH,0</div><div class="line">    MOV SI,BX</div><div class="line">    MOV BX,OFFSET STRING</div><div class="line">    DEC SI</div><div class="line">JUDGEODD:</div><div class="line">    CMP SI,AX</div><div class="line">    JNA T</div><div class="line">    MOV DL,[BX+SI]</div><div class="line">    MOV DH,[BX]</div><div class="line">    CMP DL,DH</div><div class="line">    JNZ F</div><div class="line">    INC BX</div><div class="line">    SUB SI,2</div><div class="line">    JMP JUDGEODD</div><div class="line">ITSTWO:</div><div class="line">    MOV BX,OFFSET STRING</div><div class="line">    MOV DL,[BX+1]</div><div class="line">    MOV DH,[BX]</div><div class="line">    CMP DL,DH</div><div class="line">    JNE F;如果这两个字符不相同，就不是。否则直接向下执行T</div><div class="line">T:  MOV DX,OFFSET TRUE</div><div class="line">    JMP QUIT</div><div class="line">F:  MOV DX,OFFSET FALSE</div><div class="line">    JMP QUIT</div><div class="line">QUIT:</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果贴图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/4/4.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<ol>
<li>TRUE和FALSE字符串开头加0AH、0DH可以防止回车把输入冲掉</li>
<li>奇偶情况不同，并且两个字符的情况与其他的偶数情况不同</li>
</ol>
</blockquote>
<h1 id="实验四-循环程序设计"><a href="#实验四-循环程序设计" class="headerlink" title="实验四    循环程序设计"></a><strong>实验四    循环程序设计</strong></h1><h2 id="一）实验目的-3"><a href="#一）实验目的-3" class="headerlink" title="一）实验目的"></a>一）实验目的</h2><blockquote>
<p>通过实验，可以掌握循环结构的各种实现方法，进一步了解循环结构中初始化部分、循环体部分、循环控制部分的功能以及他们彼此之间的关系。尤其是多重循环中外层循环和内层循环之间的关系。</p>
</blockquote>
<h2 id="二）实验内容-3"><a href="#二）实验内容-3" class="headerlink" title="二）实验内容"></a>二）实验内容</h2><blockquote>
<p>请编写16位完整汇编程序，在一个升序字节数组BUFF中查找数N，找到后将此数从数组中删除，并使得CF=0；没找到返回CF＝1。</p>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    BUFF BYTE 0,1,2,3,4,5,6,7,8,9</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    MOV CX,10;计数初始化为10</div><div class="line">    LEA SI,BUFF;BUFF首地址给SI</div><div class="line">    MOV AH,01H</div><div class="line">    INT 21H;从键盘输入一个字符</div><div class="line">    SUB AL,30H;将ASCII码变成数字</div><div class="line">    MOV AH,0</div><div class="line">NEXT:</div><div class="line">    MOV BL,[SI]</div><div class="line">    MOV BH,0</div><div class="line">    CMP AX,BX</div><div class="line">    JE DEL;找到了就跳至删除</div><div class="line">    INC SI</div><div class="line">    LOOP NEXT</div><div class="line">    JMP STOP;找不到就停</div><div class="line">DEL:</div><div class="line">    MOV DI,SI;记住当前元素的位置</div><div class="line">    INC SI</div><div class="line">    MOV AL,[SI]</div><div class="line">    MOV AH,0</div><div class="line">    MOV [DI],AX;后面的内容前移</div><div class="line">    LOOP DEL</div><div class="line">    MOV [SI],0;找到的最后一位换成0</div><div class="line">    LEA SI,BUFF;SI指向BUFF首地址</div><div class="line">    MOV CX,9;设计数器为9</div><div class="line">    MOV AH,02H</div><div class="line">    MOV DL,0DH</div><div class="line">    INT 21H;回车</div><div class="line">    MOV DL,0AH</div><div class="line">    INT 21H;换行</div><div class="line">DO:</div><div class="line">    MOV DL,[SI]</div><div class="line">    MOV DH,0</div><div class="line">    ADD DX,3030H;十六进制转ASCII</div><div class="line">    INC SI</div><div class="line">    INT 21H;一个个输出此时BUFF内容</div><div class="line">    LOOP DO</div><div class="line">STOP:</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H;退回DOS</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果截图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/5/5.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>八位寄存器中的两位十六进制数可以加减30H变成想要的ASCII码或者数字，十六位寄存器中的四位十六进制数可以加减3030H变成想要的ASCII码或者数字。</p>
</blockquote>
<h1 id="实验五-子程序设计"><a href="#实验五-子程序设计" class="headerlink" title="实验五    子程序设计"></a><strong>实验五    子程序设计</strong></h1><h2 id="一）实验目的-4"><a href="#一）实验目的-4" class="headerlink" title="一）实验目的"></a>一）实验目的</h2><blockquote>
<p>通过本实验，掌握子程序的定义和调用方法。通过程序调试，进一步理解CALL指令和RET指令的功能，掌握子程序调用时参数传递的方法。</p>
</blockquote>
<h2 id="二）实验内容-4"><a href="#二）实验内容-4" class="headerlink" title="二）实验内容"></a>二）实验内容</h2><blockquote>
<ol>
<li>请编写完整16位汇编程序从键盘读取字符，如果是十进制的‘0’～‘9’则在屏幕上输出该数的8位二进制码，并将数字依次存放到BUF开头的数组中，如果读入的字符是’Q’或者‘q’，则程序退出，其他情况在屏幕上打印“You must input 0~9, or ‘q’ or ‘Q’”。（如输入的字符是‘9’，则输出“00001001”）.提示：输出一个数的2进制形式应该从最高位开始输出。要求打印一个数的2进制形式和输出回车换行分别定义成一个子程序可以将此段程序定义成一个过程。</li>
</ol>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    STRING DB &apos;You must input 0~9, OR `Q` OR `q`&apos;,0AH,0DH,&apos;$&apos;</div><div class="line">    BUF DB 8 DUP(30H),&apos;$&apos;</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    MOV AH,01H</div><div class="line">    INT 21H</div><div class="line">    CMP AL,&apos;q&apos;</div><div class="line">    JE EXIT</div><div class="line">    CMP AL,&apos;Q&apos;</div><div class="line">    JE EXIT;输入&apos;q&apos;或&apos;Q&apos;时退出</div><div class="line">    CMP AL,&apos;0&apos;</div><div class="line">    JL WRONG</div><div class="line">    CMP AL,&apos;9&apos;</div><div class="line">    JG WRONG;输入小于零或者大于九时错误</div><div class="line">    </div><div class="line">    MOV BL,AL</div><div class="line">    MOV AH,02H</div><div class="line">    MOV DL,0DH</div><div class="line">    INT 21H</div><div class="line">    MOV DL,0AH</div><div class="line">    INT 21H;回车换行</div><div class="line">    </div><div class="line">    MOV AL,BL</div><div class="line">    SUB AL,30H;ASCII码转数字</div><div class="line">    MOV DX,0</div><div class="line">    MOV AH,0</div><div class="line">    MOV BX,OFFSET BUF+7</div><div class="line">AGAIN:</div><div class="line">    MOV DX,0;余数清零</div><div class="line">    MOV CX,2</div><div class="line">    DIV CX</div><div class="line">    ADD DL,30H;转ASCII码</div><div class="line">    MOV [BX],DL;将零或一附给BX所指内存中的元素</div><div class="line">    DEC BX;向左移一位</div><div class="line">    AND AX,AX</div><div class="line">    JNE AGAIN;AX不为零就继续循环</div><div class="line">    JMP RIGHT;其实这句可有可无，当时随便就写上了</div><div class="line">RIGHT:</div><div class="line">    MOV AH,09H</div><div class="line">    LEA DX,BUF</div><div class="line">    INT 21H;输出BUF内容</div><div class="line">    JMP EXIT</div><div class="line">WRONG:</div><div class="line">    MOV AH,09H</div><div class="line">    LEA DX,STRING</div><div class="line">    INT 21H;输出STRING内容</div><div class="line">    JMP EXIT</div><div class="line">EXIT:</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H;退出到DOS</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果截图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/6/6.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>刚开始没想取余数从十六进制转到二进制，后来发现我也不知道什么太好的办法-_-|||</p>
<p>通过写这个程序，我对DIV有了更深的认识。</p>
</blockquote>
<p><br><br></p>
<blockquote>
<ol>
<li>Programming a sub routine to calculate N!. Specific requirements：Read a number N(1~6) from keyboard，programming a sub routine named DAC to calcute N！, then print the result to screen in decimal form.</li>
</ol>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    STRING BYTE 6 DUP(20H),&apos;$&apos;</div><div class="line">    ENDL BYTE 0AH,0DH,&apos;$&apos;</div><div class="line">    ERRMSG BYTE &apos;You must input a number from 1~6&apos;,0AH,0DH,&apos;$&apos;</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MAIN PROC</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    MOV AH,01H</div><div class="line">    INT 21H</div><div class="line">    CMP AL,&apos;1&apos;</div><div class="line">    JL ERR;小于1的ASCII码错误</div><div class="line">    CMP AL,&apos;6&apos;</div><div class="line">    JG ERR;大于6的ASCII码错误</div><div class="line">    SUB AL,30H</div><div class="line">    MOV CL,AL</div><div class="line">    LEA DX,ENDL</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    MOV DX,0</div><div class="line">    LEA BX,STRING+5</div><div class="line">    MOV AL,01H</div><div class="line">    MOV AH,0</div><div class="line">    MOV CH,0</div><div class="line">    CALL DAC</div><div class="line">    CALL PRINT</div><div class="line">    MAIN ENDP</div><div class="line">    </div><div class="line">    DAC PROC</div><div class="line">AGAIN:</div><div class="line">    MOV DX,CX</div><div class="line">    MUL DX</div><div class="line">    LOOP AGAIN</div><div class="line">    DAC ENDP</div><div class="line">    </div><div class="line">    PRINT PROC</div><div class="line">    MOV CX,10</div><div class="line">DO:</div><div class="line">    MOV DX,0</div><div class="line">    DIV CX</div><div class="line">    ADD DL,30H</div><div class="line">    DEC BX</div><div class="line">    MOV [BX],DL</div><div class="line">    AND AX,AX</div><div class="line">    JNE DO</div><div class="line">    MOV DX,BX</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H</div><div class="line">    PRINT ENDP</div><div class="line">    </div><div class="line">ERR:</div><div class="line">    LEA DX,ENDL</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    LEA DX,ERRMSG</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果截图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/7/7.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>通过写这个程序，我对子程序设计更加熟悉。</p>
</blockquote>
<p><br></p>
<blockquote>
<ol>
<li>在附加段中有一个从小到大排序的无符号数字数组，其首地址在DI中，数组的第一个单元存放数组长度。要求用折半查找法在数组中查找数N，假设该数已在AX中，如找到，CF=0，并在SI中给出该元素在数组中的偏移地址；如未找到，CF=1。</li>
</ol>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">EXTRA SEGMENT</div><div class="line">    ARRAY BYTE 10,1,2,3,4,5,6,7,8,9,10</div><div class="line">EXTRA ENDS</div><div class="line">.CODE</div><div class="line">ASSUME ES:EXTRA</div><div class="line">START:</div><div class="line">    MOV BX,EXTRA</div><div class="line">    MOV ES,BX</div><div class="line">    LEA DI,ES:ARRAY</div><div class="line">    </div><div class="line">    MOV AL,7</div><div class="line">    </div><div class="line">    MOV CX,0</div><div class="line">    MOV CL,ES:[DI]</div><div class="line">    INC DI</div><div class="line">    MOV DX,DI</div><div class="line">    ADD DX,CX</div><div class="line">    MOV SI,DX</div><div class="line">    MOV DX,0</div><div class="line">    </div><div class="line">    CMP AL,ES:[DI]</div><div class="line">    MOV BX,DI</div><div class="line">    JB NOTFOUND</div><div class="line">    JE FOUND</div><div class="line">    CMP AL,ES:[SI-1]</div><div class="line">    MOV BX,SI</div><div class="line">    JA NOTFOUND</div><div class="line">    JE FOUND</div><div class="line"></div><div class="line">WORK:</div><div class="line">    MOV BX,DI</div><div class="line">    ADD BX,SI</div><div class="line">    SHR BX,1</div><div class="line">    CMP AL,ES:[BX]</div><div class="line">    JZ FOUND</div><div class="line">    PUSHF</div><div class="line">    CMP BX,DI</div><div class="line">    JZ NOTFOUND</div><div class="line">    POPF</div><div class="line">    JL LESS</div><div class="line">    MOV DI,BX</div><div class="line">    JMP WORK</div><div class="line">LESS:</div><div class="line">    MOV SI,BX</div><div class="line">    JMP WORK</div><div class="line">NOTFOUND:</div><div class="line">    STC</div><div class="line">    JMP EXIT</div><div class="line">FOUND:</div><div class="line">    CLC</div><div class="line">    MOV BX,SI</div><div class="line">    JMP EXIT</div><div class="line">EXIT:</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果截图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/81.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/82.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/83.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/84.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/85.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/86.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/87.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/88.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/89.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/810.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/811.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/812.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/813.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/814.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/815.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/8/816.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>我对二分查找的本质有了更深刻的理解，了解了ES的声明方式。</p>
</blockquote>
<p><br></p>
<blockquote>
<ol>
<li>在内存中有一个数组，里面是放着10个学生的某科的成绩，分别是：85,73,92,66,91,98,52,87,83,68， 请用冒泡排序法将这10个数从大到小排序，并将排序的结果在屏幕上打印出来，要求一个数一行的格式输出。</li>
</ol>
</blockquote>
<ol>
<li>源程序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">.8086</div><div class="line">.MODEL SMALL</div><div class="line">.STACK</div><div class="line">.DATA</div><div class="line">    SCORE DB 85,73,92,66,91,98,52,87,83,68</div><div class="line">    ENDL DB 0AH,0DH,&apos;$&apos;</div><div class="line">.CODE</div><div class="line">START:</div><div class="line">    MOV AX,@DATA</div><div class="line">    MOV DS,AX</div><div class="line">    MOV DI,OFFSET SCORE</div><div class="line">    MOV AX,0</div><div class="line">    MOV BX,0</div><div class="line">    MOV CX,09H</div><div class="line">    MOV DX,0</div><div class="line">C1:</div><div class="line">    MOV DX,CX</div><div class="line">    MOV DI,OFFSET SCORE</div><div class="line">C2:</div><div class="line">    MOV AL,[DI]</div><div class="line">    MOV BL,[DI+1]</div><div class="line">    CMP AL,BL</div><div class="line">    JB CHANGE</div><div class="line">    JMP NEXT</div><div class="line">CHANGE:</div><div class="line">    MOV [DI],BL</div><div class="line">    MOV [DI+1],AL</div><div class="line">NEXT:</div><div class="line">    INC DI</div><div class="line">    LOOP C2</div><div class="line">    MOV CX,DX</div><div class="line">    LOOP C1</div><div class="line">    </div><div class="line">    MOV CX,10</div><div class="line">    MOV DI,OFFSET SCORE</div><div class="line">PRINT:</div><div class="line">    MOV AH,0</div><div class="line">    MOV AL,[DI]</div><div class="line">    MOV BL,10</div><div class="line">    DIV BL</div><div class="line">    MOV DX,AX</div><div class="line">    ADD DX,3030H</div><div class="line">    MOV AH,02H</div><div class="line">    INT 21H</div><div class="line">    MOV DL,DH</div><div class="line">    INT 21H</div><div class="line">    MOV DX,OFFSET ENDL</div><div class="line">    MOV AH,09H</div><div class="line">    INT 21H</div><div class="line">    INC DI</div><div class="line">    LOOP PRINT</div><div class="line">    MOV AH,4CH</div><div class="line">    INT 21H</div><div class="line">END START</div></pre></td></tr></table></figure>
<ol>
<li>运行结果贴图</li>
</ol>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/AssemblyExperiment/master/汇编/9/9.png" alt=""></p>
<ol>
<li>编程与调试心得（遇到的问题和解决的办法，以及获得的收获）</li>
</ol>
<blockquote>
<p>要注意在排序的过程中对CX值的保存。以及数组元素大小比较。</p>
<p>但是很奇怪的是在我的==WindowsXP上的CMD中无法正确执行，但是在DOSBOX中可以执行==，所以。。。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/操作系统实验二/" itemprop="url">
                  操作系统实验二
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-09T13:00:30+08:00" content="2017-05-09">
              2017-05-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/09/操作系统实验二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/09/操作系统实验二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/05/09/操作系统实验二/" class="leancloud_visitors" data-flag-title="操作系统实验二">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="操作系统实验二"><a href="#操作系统实验二" class="headerlink" title="操作系统实验二"></a>操作系统实验二</h1><h1 id="生产者——消费者问题"><a href="#生产者——消费者问题" class="headerlink" title="生产者——消费者问题"></a>生产者——消费者问题</h1><h2 id="71115115-王子卓-2017年5月6日"><a href="#71115115-王子卓-2017年5月6日" class="headerlink" title="71115115 王子卓 2017年5月6日"></a>71115115 王子卓 2017年5月6日</h2><h2 id="一-实验目的"><a href="#一-实验目的" class="headerlink" title="一.实验目的"></a>一.实验目的</h2><ul>
<li>通过实验,掌握 Windows 和 Linux 环境下互斥锁和信号量的实现方法,加深对临界区问题和进程同步机制的理解,同时熟悉利用 Windows API 和 Pthread API 进行多线程编程的方法。</li>
</ul>
<h2 id="二-实验内容"><a href="#二-实验内容" class="headerlink" title="二.实验内容"></a>二.实验内容</h2><ol>
<li><p>在 Windows 操作系统上,利用 Win32 API 提供的信号量机制,编写应用程序实现生产者——消费者问题。</p>
</li>
<li><p>在 Linux 操作系统上,利用 Pthread API 提供的信号量机制,编写应用程序实现生产者——消费者问题。</p>
</li>
<li><p>两种环境下,生产者和消费者均作为独立线程,并通过 empty、 full、 mutex三个信号量实现对缓冲进行插入与删除。</p>
</li>
<li><p>通过打印缓冲区中的内容至屏幕,来验证应用程序的正确性。</p>
<p>具体内容可参见“Operating System Concepts (Seventh Edition)” Chapter 6后的 Project(P236-241)。</p>
</li>
</ol>
<h2 id="三-实验环境"><a href="#三-实验环境" class="headerlink" title="三.实验环境"></a>三.实验环境</h2><ul>
<li>Windows XP + Ubuntu 16.04 LTS</li>
</ul>
<h2 id="四-实验步骤"><a href="#四-实验步骤" class="headerlink" title="四.实验步骤"></a>四.实验步骤</h2><h3 id="1-Linux"><a href="#1-Linux" class="headerlink" title="1.Linux"></a>1.Linux</h3><ul>
<li><p>编写程序：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;semaphore.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFFER_SIZE 10</span></div><div class="line"><span class="keyword">char</span> *buffer;</div><div class="line"><span class="keyword">sem_t</span> mutex,empty,full;</div><div class="line"><span class="keyword">int</span> producer_count,consumer_count;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;BUFFER_SIZE;i++)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%c "</span>,buffer[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> *<span class="title">producer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">do</span>&#123;</div><div class="line">        sem_wait(&amp;empty);</div><div class="line">        sem_wait(&amp;mutex);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"生产者线程编号:%lu%s%d%s\t"</span>,pthread_self(),<span class="string">"\t计数:"</span>,producer_count%BUFFER_SIZE,<span class="string">"\t\t\t"</span>);</div><div class="line">        buffer[(producer_count++)%BUFFER_SIZE]=<span class="string">'1'</span>;</div><div class="line">        output();</div><div class="line">        count++;</div><div class="line">        sem_post(&amp;mutex);</div><div class="line">        sem_post(&amp;full);</div><div class="line">    &#125;<span class="keyword">while</span>(count!=<span class="number">5</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> *<span class="title">consumer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">do</span>&#123;</div><div class="line">        sem_wait(&amp;full);</div><div class="line">        sem_wait(&amp;mutex);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"消费者线程编号:%lu%s%d%s\t"</span>,pthread_self(),<span class="string">"\t计数:"</span>,consumer_count%BUFFER_SIZE,<span class="string">"\t\t\t"</span>);</div><div class="line">        buffer[(consumer_count++)%BUFFER_SIZE]=<span class="string">'0'</span>;</div><div class="line">        output();</div><div class="line">        count++;</div><div class="line">        sem_post(&amp;mutex);</div><div class="line">        sem_post(&amp;empty);</div><div class="line">    &#125;<span class="keyword">while</span>(count!=<span class="number">5</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span>&#123;</div><div class="line">    producer_count=<span class="number">0</span>;</div><div class="line">    consumer_count=<span class="number">0</span>;</div><div class="line">    buffer = (<span class="keyword">char</span>*) <span class="built_in">malloc</span>(BUFFER_SIZE*<span class="keyword">sizeof</span>(<span class="keyword">char</span>*));</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;BUFFER_SIZE;i++)&#123;</div><div class="line">        buffer[i]=<span class="string">'0'</span>;</div><div class="line">    &#125;</div><div class="line">    sem_init(&amp;mutex,<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">    sem_init(&amp;empty,<span class="number">0</span>,BUFFER_SIZE);</div><div class="line">    sem_init(&amp;full,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">pthread_t</span> tid[<span class="number">10</span>];</div><div class="line">    <span class="keyword">pthread_attr_t</span> attr;</div><div class="line">    pthread_attr_init(&amp;attr);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">        pthread_create(&amp;tid[i],&amp;attr,consumer,<span class="literal">NULL</span>);</div><div class="line">        pthread_create(&amp;tid[i+<span class="number">5</span>],&amp;attr,producer,<span class="literal">NULL</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)&#123;</div><div class="line">        pthread_join(tid[j],<span class="literal">NULL</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>编译配置：</p>
<p>由于我用Qt Creator编写程序，所以需要在<code>.pro</code>文件中加入特定参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">TEMPLATE = app</div><div class="line">CONFIG += console</div><div class="line">CONFIG -= app_bundle</div><div class="line">CONFIG -= qt</div><div class="line"></div><div class="line">SOURCES += main.c</div><div class="line">LIBS += -lpthread</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-Windows"><a href="#2-Windows" class="headerlink" title="2.Windows"></a>2.Windows</h3><ul>
<li><p>编写程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> buffer_item;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFFER_SIZE 5</span></div><div class="line"></div><div class="line">buffer_item buffer[BUFFER_SIZE];</div><div class="line">HANDLE mutex,empty,full;</div><div class="line"><span class="keyword">int</span> producer_count=<span class="number">0</span>,consumer_count=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">		<span class="built_in">cout</span>&lt;&lt;buffer[i]&lt;&lt;<span class="string">"\t"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insert_item</span><span class="params">(buffer_item item)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> state=<span class="number">0</span>;</div><div class="line">	WaitForSingleObject(empty,INFINITE);</div><div class="line">	WaitForSingleObject(mutex,INFINITE);</div><div class="line">	</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"现在producer_count是%d,正在生产\n"</span>,producer_count);</div><div class="line">	<span class="keyword">if</span>(buffer[producer_count]!=<span class="number">-1</span>)&#123;</div><div class="line">		state = <span class="number">-1</span>;</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">		buffer[producer_count] = item;</div><div class="line">		producer_count = (producer_count++)%BUFFER_SIZE;</div><div class="line">	&#125;</div><div class="line">	Sleep(<span class="number">500</span>);</div><div class="line">	output();</div><div class="line">	ReleaseMutex(mutex);</div><div class="line">	ReleaseSemaphore(full,<span class="number">1</span>,<span class="literal">NULL</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"生产释放\n"</span>);</div><div class="line">	<span class="keyword">return</span> state;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove_item</span><span class="params">(buffer_item *item)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> state = <span class="number">0</span>;</div><div class="line">	WaitForSingleObject(full,INFINITE);</div><div class="line">	WaitForSingleObject(mutex,INFINITE);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"现在consumer_count是%d,正在消费\n"</span>,consumer_count);</div><div class="line">	<span class="keyword">if</span>(buffer[consumer_count]!=<span class="number">-1</span>)&#123;</div><div class="line">		*item = buffer[consumer_count];</div><div class="line">		buffer[consumer_count] = <span class="number">-1</span>;</div><div class="line">		consumer_count = (consumer_count++)%BUFFER_SIZE;</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">		state = <span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	Sleep(<span class="number">500</span>);</div><div class="line">	output();</div><div class="line">	ReleaseMutex(mutex);</div><div class="line">	ReleaseSemaphore(empty,<span class="number">1</span>,<span class="literal">NULL</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"消费释放\n"</span>);</div><div class="line">	<span class="keyword">return</span> state;</div><div class="line">&#125;</div><div class="line"><span class="function">DWORD WINAPI <span class="title">producer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span>&#123;</div><div class="line">	buffer_item randb;</div><div class="line">	srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</div><div class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">		randb = rand();</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"现在生产者准备生产%d\n"</span>,randb);</div><div class="line">		<span class="keyword">if</span>(insert_item(randb))&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"生产者出了问题\n"</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"生产者生产了%d\n\n"</span>,randb);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function">DWORD WINAPI <span class="title">consumer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span>&#123;</div><div class="line">	buffer_item item;</div><div class="line">	srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</div><div class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"现在消费者准备消费\n"</span>);</div><div class="line">		<span class="keyword">if</span>(remove_item(&amp;item))&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"消费者出了问题\n"</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"消费者消费了%d\n\n"</span>,item);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	mutex = CreateMutex(<span class="literal">NULL</span>,<span class="literal">false</span>,<span class="literal">NULL</span>);</div><div class="line">	empty = CreateSemaphore(<span class="literal">NULL</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="literal">NULL</span>);</div><div class="line">	full = CreateSemaphore(<span class="literal">NULL</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="literal">NULL</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;BUFFER_SIZE;i++)&#123;</div><div class="line">		buffer[i]=<span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	DWORD ConsumerTid,ProducerTid;</div><div class="line">	HANDLE ConsumerTH,ProducerTH;</div><div class="line">	<span class="keyword">int</span> Param = <span class="number">10</span>;</div><div class="line">	ConsumerTH = CreateThread(<span class="literal">NULL</span>,<span class="number">0</span>,&amp;consumer,&amp;Param,<span class="number">0</span>,&amp;ConsumerTid);</div><div class="line">	ProducerTH = CreateThread(<span class="literal">NULL</span>,<span class="number">0</span>,&amp;producer,&amp;Param,<span class="number">0</span>,&amp;ProducerTid);</div><div class="line">	</div><div class="line">	Sleep(<span class="number">5000</span>);</div><div class="line">	TerminateThread(ConsumerTH,<span class="number">0</span>);</div><div class="line">	TerminateThread(ProducerTH,<span class="number">0</span>);</div><div class="line">	CloseHandle(ConsumerTH);</div><div class="line">	CloseHandle(ProducerTH);</div><div class="line">	</div><div class="line">	system(<span class="string">"pause"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="五-主要数据结构及其说明"><a href="#五-主要数据结构及其说明" class="headerlink" title="五.主要数据结构及其说明"></a>五.主要数据结构及其说明</h2><ol>
<li>定义BUFFER_SIZE：<code>#define BUFFER_SIZE 10</code></li>
<li>定义互斥信号量mutex，用于保证生产者生产的时候消费者不能消费，消费者消费的时候生产者不能生产。</li>
<li>定义信号量empty，代表缓冲区中空格子的个数。</li>
<li>定义信号量full，代表缓冲区中满格子的个数。</li>
<li>定义整型变量producer_count，用来表示生产者在缓冲区中的游标位置。</li>
<li>定义整型变量consumer_count，用来表示消费者在缓冲区中的游标位置。</li>
</ol>
<h2 id="六-程序运行结果"><a href="#六-程序运行结果" class="headerlink" title="六.程序运行结果"></a>六.程序运行结果</h2><ul>
<li>Linux运行结果：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/OSExperiment/pthread.png" alt=""></p>
<ul>
<li><p>Windows运行结果：</p>
<p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/OSExperiment/winThread.bmp" alt=""></p>
</li>
</ul>
<h2 id="七-实验体会"><a href="#七-实验体会" class="headerlink" title="七.实验体会"></a>七.实验体会</h2><ul>
<li><p>在Linux系统中pthread库不是默认的库，连接时需要使用静态库 libpthread.a，在编译中要加 -pthread参数。比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -pthread ./main.c</div></pre></td></tr></table></figure>
<p>然而我使用了Qt Creator编写程序，直接在<code>.pro</code>文件中加入<code>LIBS += -lpthread</code>即可。</p>
</li>
<li><p>在具体实现时，需要注意信号量的顺序，比如生产者线程中：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sem_wait(&amp;empty);</div><div class="line">sem_wait(&amp;mutex);</div></pre></td></tr></table></figure>
<p>如果顺序相反，将会导致死锁。生产者经过<code>sem_wait(&amp;mutex)</code>之后，如果信号量empty的值等于零，也就是说缓冲区中没有空格子，将无法继续生产，然而此时消费者也没有办法消费，从而死锁。</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/10/软件体系结构复习/" itemprop="url">
                  软件体系结构复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-10T00:37:41+08:00" content="2017-04-10">
              2017-04-10
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/10/软件体系结构复习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/10/软件体系结构复习/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/04/10/软件体系结构复习/" class="leancloud_visitors" data-flag-title="软件体系结构复习">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="软件系统设计与体系结构"><a href="#软件系统设计与体系结构" class="headerlink" title="软件系统设计与体系结构"></a>软件系统设计与体系结构</h1><h2 id="一-基于软件重用的设计方法学"><a href="#一-基于软件重用的设计方法学" class="headerlink" title="一.基于软件重用的设计方法学"></a>一.基于软件重用的设计方法学</h2><h3 id="1-软件重用"><a href="#1-软件重用" class="headerlink" title="1.软件重用"></a>1.软件重用</h3><h4 id="1-定义"><a href="#1-定义" class="headerlink" title="(1)定义"></a>(1)定义</h4><ul>
<li>软件重用是一种由预先构造好的、以重用为目的而设计的软件构件来建立或组装软件系统的过程。</li>
</ul>
<h4 id="2-重用方法"><a href="#2-重用方法" class="headerlink" title="(2)重用方法"></a>(2)重用方法</h4><ol>
<li>代码复用</li>
<li>设计复用</li>
<li>分析复用</li>
<li>测试信息复用</li>
</ol>
<h4 id="3-优缺点"><a href="#3-优缺点" class="headerlink" title="(3)优缺点"></a>(3)优缺点</h4><ul>
<li>优点:在已有工作的基础上，充分利用以前系统开发中积累的知识和经验 ，将开发的重点转移到现有系统的特有构成成分。</li>
<li>缺点: <ul>
<li>过程方面：缺少支持软件重用的软件开发过程</li>
<li>工程方面：缺乏支持实施软件重用的工具、没有构件重用库或库信息很快过时</li>
<li>组织方面：管理者轻视</li>
<li>资金方面：初期投入大</li>
</ul>
</li>
</ul>
<h4 id="4-原则"><a href="#4-原则" class="headerlink" title="(4)原则"></a>(4)原则</h4><ul>
<li>在已有工作的基础上，充分利用以前系统开发中积累的知识和经验 ，将开发的重点转移到现有系统的特有构成成分。</li>
</ul>
<h4 id="5-判断题"><a href="#5-判断题" class="headerlink" title="(5)判断题"></a>(5)判断题</h4><ol>
<li>启动软件重用仅仅是为了引入合适的技术(X)</li>
<li>软件重用可能会有用，但太昂贵(√)</li>
<li>采用OO的程序设计语言会导致系统化的重用(X)</li>
<li>只能将重用局限在代码构件上(X)</li>
<li>开发人员要从数以万计的小构件中选取要重用的构件(X)</li>
<li>只要建立可重用构件库就会促使构件重用(X)</li>
<li>启动软件重用仅仅是为了引入合适的技术(X)</li>
</ol>
<h3 id="2-构件技术"><a href="#2-构件技术" class="headerlink" title="2.构件技术"></a>2.构件技术</h3><h4 id="1-定义-1"><a href="#1-定义-1" class="headerlink" title="(1)定义"></a>(1)定义</h4><ul>
<li>语义完整、语法正确和有重用价值的软件单元，是软件重用过程中可明确辨识的成分。</li>
</ul>
<h4 id="2-获取途径"><a href="#2-获取途径" class="headerlink" title="(2)获取途径"></a>(2)获取途径</h4><ol>
<li>从现有构件中获得（★提倡）</li>
<li>通过遗留工程</li>
<li>现成的商业构件</li>
<li>开发新构件</li>
</ol>
<h4 id="3-好处"><a href="#3-好处" class="headerlink" title="(3)好处"></a>(3)好处</h4><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/1-1.png?raw=true" alt="a"></p>
<p>​                         <img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/1-2.png?raw=true" alt="b"></p>
<h4 id="4-人员划分"><a href="#4-人员划分" class="headerlink" title="(4)人员划分"></a>(4)人员划分</h4><ul>
<li>通过实现构件库管理系统，软件开发人员被分为两类：构件开发人员和构件组装人员，实现了软件开发人员的合理分工。</li>
</ul>
<h2 id="二-软件体系架构SA的概念"><a href="#二-软件体系架构SA的概念" class="headerlink" title="二.软件体系架构SA的概念"></a>二.软件体系架构SA的概念</h2><h3 id="1-发展历程"><a href="#1-发展历程" class="headerlink" title="1.发展历程"></a>1.发展历程</h3><h4 id="1-发展历程-1"><a href="#1-发展历程-1" class="headerlink" title="(1)发展历程"></a>(1)发展历程</h4><ul>
<li><p>“无体系结构”设计阶段：汇编语言，规模小，无需建模</p>
</li>
<li><p>萌芽阶段——程序结构设计阶段：高级程序语言，SA的概念被明确</p>
</li>
<li><p>初级阶段——模块结构阶段：OO技术，从多角度对系统建模（如UML）</p>
</li>
<li><p>高级阶段——构件结构阶段：以Kruchten提出的“4+1”模型为标志</p>
<p>尽管目前仍存在许多问题，但地位已经迅速上升。</p>
</li>
</ul>
<h4 id="2-重用粒度的提升"><a href="#2-重用粒度的提升" class="headerlink" title="(2)重用粒度的提升"></a>(2)重用粒度的提升</h4><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-1.png?raw=true" alt=""></p>
<ul>
<li>重用粒度提升的原因：<ol>
<li>软件系统规模和复杂度的提升</li>
<li>软件行业开发经验的积累及相关理论的提出</li>
</ol>
</li>
</ul>
<h4 id="3-SA的定义"><a href="#3-SA的定义" class="headerlink" title="(3)SA的定义"></a>(3)SA的定义</h4><ul>
<li>尽管目前有很多对SA的定义，但我们倾向于更容易被理解的Garlan &amp; Shaw 模型</li>
<li>SA={Component, Connectors, Constrains}  软件体系架构=构件+连接件+约束（配置）</li>
</ul>
<h3 id="2-SA的构成要素"><a href="#2-SA的构成要素" class="headerlink" title="2.SA的构成要素"></a>2.SA的构成要素</h3><h4 id="1-软件构件"><a href="#1-软件构件" class="headerlink" title="(1)软件构件"></a>(1)软件构件</h4><ul>
<li>强调三点：<ul>
<li>构件的粒度</li>
<li>构件内部</li>
<li>端口</li>
</ul>
</li>
<li>补充一点：<ul>
<li>还要关注构件的进化能力，它是系统进化的基础。</li>
</ul>
</li>
</ul>
<h4 id="2-连接件"><a href="#2-连接件" class="headerlink" title="(2)连接件"></a>(2)连接件</h4><ul>
<li><p>用来建立构件间的交互，以及支配这些交互规则的体系结构的构造模块。</p>
</li>
<li><p>常见的连接件：</p>
<p>|   体系结构    |   连接件名称   |<br>| :——-: | :——-: |<br>| “客户机/服务器” | 通信协议或通信机制 |<br>| “管道-过滤器”  | 管道（Pipe）  |</p>
</li>
</ul>
<h4 id="3-约束-配置"><a href="#3-约束-配置" class="headerlink" title="(3)约束(配置)"></a>(3)约束(配置)</h4><ul>
<li>描述了体系结构的构件与连接件的连接图，它一般是对象连接时的规则，或指明构件连接的势态或条件。</li>
</ul>
<h2 id="三-SA风格"><a href="#三-SA风格" class="headerlink" title="三.SA风格"></a>三.SA风格</h2><h3 id="1-SA定义"><a href="#1-SA定义" class="headerlink" title="1.SA定义"></a>1.SA定义</h3><ul>
<li>一般意义上，SA模式=SA风格，没有本质区别，因此可以从理解SA模式来理解SA风格。</li>
<li>模式——抽取重复问题，描述解决方案的核心。</li>
<li>SA模式：意图+上下文+问题+解决方案</li>
<li>两者也有少许区别：<ul>
<li>SA风格描述系统总体框架，而SA模式描述得更广</li>
<li>SA风格相对独立，而模式彼此依赖性较强</li>
<li>SA风格侧重抽取总体结构，模式更面向问题</li>
</ul>
</li>
</ul>
<h3 id="2-经典风格的优缺点、应用场景"><a href="#2-经典风格的优缺点、应用场景" class="headerlink" title="2.经典风格的优缺点、应用场景"></a>2.经典风格的优缺点、应用场景</h3><h4 id="1-管道-过滤器"><a href="#1-管道-过滤器" class="headerlink" title="(1)管道-过滤器"></a>(1)管道-过滤器</h4><ul>
<li>过滤器——过滤器接收数据输入，进行转化后输出。</li>
<li>管道——负责连接各个过滤器，负责它们之间的交互。</li>
<li>有三种常见变种:<ol>
<li>流水线模式——批处理、Unix shell、编译器;</li>
<li>有界管道——限制数据量(带宽);</li>
<li>类型管道——限制数据类型通过。</li>
</ol>
</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-1*.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>软构件具有隐蔽性、高内聚、低耦合★</li>
<li>支持并行执行★</li>
<li>易于理解——系统行为=多个过滤器的行为</li>
<li>支持软件重用</li>
<li>易维护、增强系统性能简单(体现在增删中)</li>
<li>易于分析吞吐量、死锁等属性</li>
</ol>
</li>
<li>缺点：<ol>
<li>系统性能下降，且增加编写过滤器的复杂性★</li>
<li>导致进程成为批处理的结构</li>
<li>不适合处理交互的应用</li>
</ol>
</li>
</ul>
<h4 id="2-数据抽象和面向对象风格"><a href="#2-数据抽象和面向对象风格" class="headerlink" title="(2)数据抽象和面向对象风格"></a>(2)数据抽象和面向对象风格</h4><ul>
<li>这种风格建立在数据抽象和面向对象的基础上。</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-3.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>易分解——可将数据存取操作分解为一些交互的代理程序的集合 ★</li>
<li>易维护——改变一个对象内部的表示，不会影响其他对象(封装)</li>
</ol>
</li>
<li>缺点：<ol>
<li>过程调用依赖于对象标识的确定★</li>
<li>不同对象的操作关联性弱，尤其是发生在多个对象同时访问一个对象时。</li>
</ol>
</li>
</ul>
<h4 id="3-基于事件的隐式调用风格"><a href="#3-基于事件的隐式调用风格" class="headerlink" title="(3)基于事件的隐式调用风格"></a>(3)基于事件的隐式调用风格</h4><ul>
<li>构件不直接调用一个过程，而是触发或广播一个或多个事件。</li>
<li>一个事件的触发=&gt;另一个模块中所有过程的调用</li>
<li>构成要素：<ul>
<li>构件——是一些模块，既可以是一些过程，又可以是一些事件的集合。</li>
<li>连接件——触发信息、广播信息</li>
<li>约束——触发模块与过程执行模块间的联系规则</li>
</ul>
</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-4.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>为软件重用提供了强大的支持★</li>
<li>为改进带来了方便。</li>
</ol>
</li>
<li>缺点：<ol>
<li>构件放弃了对系统计算的控制★</li>
<li>数据交换成问题(对于利用共享数据进行交互不利)</li>
<li>很难对系统的正确性进行推理(需要人的参与)</li>
</ol>
</li>
<li>应用领域：<ol>
<li>编辑器中支持语法检查——触发报警★</li>
<li>数据库系统中用于检查一致性约束条件等</li>
</ol>
</li>
</ul>
<h4 id="4-层次系统风格"><a href="#4-层次系统风格" class="headerlink" title="(4)层次系统风格"></a>(4)层次系统风格</h4><ul>
<li>每一层为它的上层提供服务，并作为下层的客户，不能跨层调用。</li>
<li>由于每一层最多只影响两层，同时只要给相邻层提供相同的接口，允许每层用不同的方法实现，同样<em>为软件重用提供了强大的支持</em>。</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-5.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>支持基于抽象程度递增的系统设计★</li>
<li>支持重用★</li>
<li>支持功能增强，改实现不改接口</li>
</ol>
</li>
<li>缺点：<ol>
<li>一些系统不易被分层★</li>
<li>很难找到一个合适的、正确的层次抽象方法</li>
</ol>
</li>
<li>应用领域：<ol>
<li>分层通信协议(OSI-ISO)</li>
<li>OS</li>
<li>数据库系统</li>
<li>TCP/IP协议栈</li>
</ol>
</li>
</ul>
<h4 id="5-仓库风格和黑板风格"><a href="#5-仓库风格和黑板风格" class="headerlink" title="(5)仓库风格和黑板风格"></a>(5)仓库风格和黑板风格</h4><ul>
<li>两种构件组成：<ul>
<li>一个中央数据结构——当前状态</li>
<li>一批独立构件的集合——与中央数据结构交互</li>
</ul>
</li>
<li>两类控制策略：<ol>
<li>传统数据库(12306)</li>
<li>黑板体系结构(BBS)</li>
</ol>
</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-6.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>便于多客户共享大量数据★</li>
<li>添加知识源和扩展黑板数据结构都很方便</li>
</ol>
</li>
<li>缺点：<ol>
<li>要保证数据结构的完整和一致——系统复杂度增加(同步/加锁)★</li>
<li>不同知识源代理对共享数据结构要一致——修改难(通过安装控件保持更新)</li>
</ol>
</li>
</ul>
<h4 id="6-模型-视图-控制器风格MVC"><a href="#6-模型-视图-控制器风格MVC" class="headerlink" title="(6)模型-视图-控制器风格MVC"></a>(6)模型-视图-控制器风格MVC</h4><ul>
<li>MVC风格将交互式应用划分为3种构件：<ol>
<li>模型(Model)</li>
<li>视图(View)</li>
<li>控制器(Controller)</li>
</ol>
</li>
<li>最重要的一点：用户只操作控制器构件，看视图构件的显示，不去碰模型构件里面的应用程序核心代码。</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-7.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>改变界面影响小，易于演化，可维护性好★</li>
<li>分而治之，简化设计，保证了可扩展性</li>
<li>易于改变，动态机制良好</li>
</ol>
</li>
<li>缺点：<ul>
<li>仅局限在应用软件的用户界面开发领域中★</li>
</ul>
</li>
<li>应用领域：<ol>
<li>Windows应用程序的文档视图结构</li>
<li>Java Swing应用程序等</li>
</ol>
</li>
</ul>
<h4 id="7-解释器风格"><a href="#7-解释器风格" class="headerlink" title="(7)解释器风格"></a>(7)解释器风格</h4><ul>
<li>创建了一个软件虚拟出来的机器。该系统的4个构件：<ul>
<li>1个状态机——执行引擎</li>
<li>3个存储器<ul>
<li>正在被解释的程序</li>
<li>被解释的程序的当前状态</li>
<li>执行引擎的当前状态</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/2-8.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>对未实现的硬件进行仿真★</li>
<li>提升程序设计语言的跨平台能力</li>
<li>有助于应用程序的可移植性</li>
</ol>
</li>
<li>缺点：<ol>
<li>额外的间接层次带来了系统性能的下降★</li>
</ol>
</li>
<li>应用领域：<ol>
<li>虚拟机★</li>
<li>程序设计语言的编译器</li>
<li>基于规则的系统</li>
<li>脚本语言</li>
</ol>
</li>
</ul>
<h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><ol>
<li><p>“构件不直接调用一个过程，而是触发或广播一个或多个事件”是那种SA风格？</p>
<p>基于事件的隐式调用风格</p>
</li>
<li><p>采用OO的程序设计语言会导致系统化的重用(X系统化)</p>
</li>
<li><p>不应该将重用只局限在代码构件上(√)</p>
</li>
</ol>
<h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h4><table>
<thead>
<tr>
<th>数据流风格</th>
<th>共享数据</th>
<th>抽象数据类型</th>
<th>隐式调用</th>
<th>管道-过滤器</th>
</tr>
</thead>
<tbody>
<tr>
<td>算法变更</td>
<td>–</td>
<td>-</td>
<td>+</td>
<td>+</td>
</tr>
<tr>
<td>数据表示变更</td>
<td>–</td>
<td>++</td>
<td>-</td>
<td>–</td>
</tr>
<tr>
<td>功能变更</td>
<td>+</td>
<td>-</td>
<td>++</td>
<td>+</td>
</tr>
<tr>
<td>性能</td>
<td>++</td>
<td>-（*）</td>
<td>–</td>
<td>–</td>
</tr>
<tr>
<td>重用</td>
<td>–</td>
<td>++</td>
<td>-</td>
<td>+</td>
</tr>
</tbody>
</table>
<h3 id="3-B-S-架构、C-S两层、三层架构"><a href="#3-B-S-架构、C-S两层、三层架构" class="headerlink" title="3.B/S 架构、C/S两层、三层架构"></a>3.B/S 架构、C/S两层、三层架构</h3><h4 id="1-B-S风格"><a href="#1-B-S风格" class="headerlink" title="(1)B/S风格"></a>(1)B/S风格</h4><ul>
<li>WWW浏览器技术——客户端</li>
<li>应用程序以网页形式存放于Web服务器上</li>
<li>用户通过键入URL，调用应用程序，对数据库进行操作</li>
<li>优点：<ul>
<li>浏览器与Web服务器真正的连接时间很短，因此Web服务器可以为更多的用户提供服务。</li>
</ul>
</li>
<li>缺点：<ul>
<li>数据的动态交互性不强（尤其是一些需要及时响应的，经常交互的）——会“卡”,怎么办？————混合SA，即二层C/S+B/S</li>
</ul>
</li>
</ul>
<h4 id="2-二层C-S风格"><a href="#2-二层C-S风格" class="headerlink" title="(2)二层C/S风格"></a>(2)二层C/S风格</h4><ul>
<li>C/S体系结构的三个主要组成部分：<ol>
<li>数据库服务器</li>
<li>客户应用程序</li>
<li>网络</li>
</ol>
</li>
<li>服务器、客户应用程序的主要任务：<ol>
<li>服务器——DB的安全性、控制并发、全局数据完整性规则、备份与恢复</li>
<li>客户应用程序——提供交互界面、提交用户请求并接收反馈、处理存在于客户端的数据</li>
<li>网络通信软件——完成数据库服务器和客户应用程序之间的数据传输</li>
</ol>
</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/3-1.png?raw=true" alt=""></p>
<ul>
<li>优点：<ol>
<li>灵活</li>
<li>可扩展</li>
<li>通过合理地分解任务，可以使应用成本降低</li>
</ol>
</li>
<li>缺点：<ol>
<li>开发成本较高</li>
<li>客户端程序设计复杂</li>
<li>软件维护很麻烦</li>
</ol>
</li>
</ul>
<h4 id="3-三层C-S风格"><a href="#3-三层C-S风格" class="headerlink" title="(3)三层C/S风格"></a>(3)三层C/S风格</h4><h5 id="①二层C-S风格的局限性"><a href="#①二层C-S风格的局限性" class="headerlink" title="①二层C/S风格的局限性"></a>①二层C/S风格的局限性</h5><ul>
<li>二层C/S结构以单一服务器、局域网为核心的，难以扩展至大型企业广域网和Internet</li>
<li>软硬件结合以及集成能力有限</li>
<li>服务器负荷太重，性能低</li>
<li>数据安全性差，因为客户端程序可以访问数据库服务器，所以其他程序也可以使用类似的方法访问。</li>
</ul>
<h5 id="②三层C-S风格的三个层次"><a href="#②三层C-S风格的三个层次" class="headerlink" title="②三层C/S风格的三个层次"></a>②三层C/S风格的三个层次</h5><ol>
<li>表示层：应用的用户接口，担负着用户与应用间对话的功能。</li>
<li>功能层：应用的本体，是程序中具体的业务处理逻辑。</li>
<li>数据层：DBMS数据库管理系统，负责对数据库的读写。</li>
</ol>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/3-2.png?raw=true" alt=""></p>
<h5 id="③优点"><a href="#③优点" class="headerlink" title="③优点"></a>③优点</h5><ol>
<li>提高系统和软件的可维护性和可扩展性</li>
<li>可灵活选用相应的平台和硬件系统</li>
<li>高效地进行开发，且便于维护</li>
<li>为严格的安全管理奠定了坚实的基础</li>
</ol>
<blockquote>
<p>基本上符合软件设计关注的四大质量属性：可修改性、性能、安全性、可用性</p>
</blockquote>
<h3 id="4-异构结构风格"><a href="#4-异构结构风格" class="headerlink" title="4.异构结构风格"></a>4.异构结构风格</h3><h4 id="1-使用异构风格的原因"><a href="#1-使用异构风格的原因" class="headerlink" title="(1)使用异构风格的原因"></a>(1)使用异构风格的原因</h4><ol>
<li>不同的结构都同时具有优缺点</li>
<li>关于软件包、框架、通信的标准的变动</li>
<li>遗留工程与遗留代码的使用</li>
<li>解释或表示习惯上的不同</li>
</ol>
<h4 id="2-典型的异构体系结构——C-S与B-S的混合SA"><a href="#2-典型的异构体系结构——C-S与B-S的混合SA" class="headerlink" title="(2)典型的异构体系结构——C/S与B/S的混合SA"></a>(2)典型的异构体系结构——C/S与B/S的混合SA</h4><ol>
<li>企业内部C/S结构+企业外部B/S结构(“内外有别”)</li>
<li>修改数据C/S结构+查询数据B/S结构(“改查有别”)</li>
</ol>
<blockquote>
<p>都是对安全性和动态交互性能的权衡</p>
</blockquote>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/3-3.png?raw=true" alt=""></p>
<h2 id="四-SA描述"><a href="#四-SA描述" class="headerlink" title="四.SA描述"></a>四.SA描述</h2><h3 id="1-SA描述方法及典型描述语言"><a href="#1-SA描述方法及典型描述语言" class="headerlink" title="1.SA描述方法及典型描述语言"></a>1.SA描述方法及典型描述语言</h3><blockquote>
<p>SA风格是对经典应用系统的特征抽象,SA描述是对真正软件系统的具体展现</p>
</blockquote>
<ul>
<li>目前通用的描述SA的方法——非形式化的图和文本<ul>
<li>缺点：<ol>
<li>不能描述系统构件之间的接口</li>
<li>难于进行形式化分析和模拟</li>
<li>缺乏相应的支持工具帮助设计师完成设计工作</li>
<li>不能分析其一致性和完整性等特性</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="1-SA的描述方法"><a href="#1-SA的描述方法" class="headerlink" title="(1)SA的描述方法"></a>(1)SA的描述方法</h4><ul>
<li>SA的描述方法——软件体系结构描述语言（Architecture Description Language，ADL）</li>
<li>SA的三个最基本的构成元素=&gt;ADL的三个基本构成要素<ol>
<li>构件：基本计算单元、数据存储单元</li>
<li>连接件：用来建立构件间的交互，以及支配这些交互规则的体系结构构造模块</li>
<li>体系结构配置：描述1和2的连接图，提供信息来确定构件是否正确连接、接口是否匹配、连接件构成的通信是否正确，并说明实现要求行为的组合语义——澄清系统结构</li>
</ol>
</li>
<li>★好的ADL能够起到承上启下的作用<ul>
<li>需求分析=&gt;SA设计（ADL）=&gt;软件设计</li>
<li>SA设计——桥梁</li>
<li>SA描述——效果图（建模）</li>
<li>ADL——画效果图的工具（建模工具）</li>
<li>一个好的ADL——可以让SA描述方便地转换为其它设计文档，同时可利用需求分析成果直接生成系统的体系结构说明。</li>
</ul>
</li>
</ul>
<h4 id="2-典型SA描述语言"><a href="#2-典型SA描述语言" class="headerlink" title="(2)典型SA描述语言"></a>(2)典型SA描述语言</h4><ul>
<li>主要的SA描述语言<ol>
<li>UniCon——支持异构的构件和连接件类型，并提供了关于体系结构的高层编译器</li>
<li>C2——支持构件重置与GUI重用</li>
<li>Wright——连接件=协议，协议刻画构件行为专注于抽象行为的精确表达，以及为架构师提供结构化表达系统信息的方法</li>
<li>ACME——是一种交互式ADL，它旨在为开发工具与环境提供交互格式。</li>
</ol>
</li>
</ul>
<blockquote>
<p>总之，这些ADL都强调了体系结构的不同侧面，大部分ADL都是与领域相关，不利于对不同领域的体系结构进行分析。多种ADL并存的局面正在演化为几种通用的ADL。</p>
</blockquote>
<h3 id="2-4-1模型"><a href="#2-4-1模型" class="headerlink" title="2. 4+1模型"></a>2. 4+1模型</h3><h4 id="1-组成"><a href="#1-组成" class="headerlink" title="(1)组成"></a>(1)组成</h4><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/4-1.png?raw=true" alt=""></p>
<h4 id="2-作用"><a href="#2-作用" class="headerlink" title="(2)作用"></a>(2)作用</h4><h5 id="①4-1模型"><a href="#①4-1模型" class="headerlink" title="①4+1模型"></a>①4+1模型</h5><ul>
<li>使得有不同需求的人员能够得到他们想要了解的SA的某一方面。</li>
</ul>
<h5 id="②逻辑视图"><a href="#②逻辑视图" class="headerlink" title="②逻辑视图"></a>②逻辑视图</h5><ul>
<li>当采用面向对象的设计方法时，逻辑试图即是对象模型。</li>
</ul>
<h5 id="③过程视图"><a href="#③过程视图" class="headerlink" title="③过程视图"></a>③过程视图</h5><ul>
<li>描述系统的并发和同步方面的设计。</li>
</ul>
<h5 id="④物理视图"><a href="#④物理视图" class="headerlink" title="④物理视图"></a>④物理视图</h5><ul>
<li>描述软件与硬件之间的映射关系，反映系统在分布方面的设计。</li>
</ul>
<h5 id="⑤开发视图"><a href="#⑤开发视图" class="headerlink" title="⑤开发视图"></a>⑤开发视图</h5><ul>
<li>描述软件在开发环境下的静态组织结构。</li>
</ul>
<h5 id="⑥场景视图"><a href="#⑥场景视图" class="headerlink" title="⑥场景视图"></a>⑥场景视图</h5><ul>
<li>场景是用例的集合，这些用例对SA加以说明。</li>
</ul>
<h4 id="3-关注点"><a href="#3-关注点" class="headerlink" title="(3)关注点"></a>(3)关注点</h4><ul>
<li><p>逻辑视图</p>
<p>SA的组成以实现功能需求，即提供什么样的服务（OO的分解：子系统、模块名称）</p>
</li>
<li><p>过程视图</p>
<p>非功能需求，过程分解（并发、进程、通讯、容错…）</p>
</li>
<li><p>物理视图</p>
<p>从软件到硬件的映射（硬件部署）</p>
</li>
<li><p>开发视图</p>
<p>子系统组件的类型（开发所得部件的显示）</p>
</li>
<li><p>场景视图</p>
<p>汇总，用例的实例（软件产品对架构的需求）</p>
</li>
</ul>
<h3 id="3-题目"><a href="#3-题目" class="headerlink" title="3.题目"></a>3.题目</h3><ol>
<li><p>在“4+1”视图模型中，__的体系结构关注的是从软件到硬件的映射；__描述了系统的动态结构A.逻辑视图           B.开发视图    C.进(/过)程视图         D.场景视图        E.物理视图</p>
<p>(E,C)</p>
</li>
<li><p>开发人员要从数以万计的小构件中选取要重用的构件(之前有过，X)</p>
</li>
<li><p>由于考虑到提升通用性，所以被重用的代码构件速度太低(√)</p>
</li>
<li><p>只要建立可重用构件库就会促使构件重用(X)</p>
</li>
</ol>
<h3 id="4-XML"><a href="#4-XML" class="headerlink" title="4.XML"></a>4.XML</h3><h4 id="1-与HTML的区别"><a href="#1-与HTML的区别" class="headerlink" title="(1)与HTML的区别"></a>(1)与HTML的区别</h4><ul>
<li>目标 :HTML的设计目标是显示数据，焦点是数据外观，而XML的设计目标是描述数据，焦点是数据的内容，它的显示形式靠CSS或XSL帮助完成。</li>
<li>语法：HTML的标记不是所有的都需要成对出现，XML则要求所有的标记必须成对出现；HTML标记不区分大小写，XML则大小敏感，即区分大小写。</li>
<li>更新：XML允许粒度更新，不必在XML文档每次有局部改变时都发送整个文档的内容，只有改变的元素才必须从服务器发送到客户机，而HTML却不支持这样的功能</li>
<li>标签的定义：XML的标记由架构或文档的作者定义，并且是无限制的。HTML的标记则是预定义的;HTML 作者只能使用当前 HTML 标准所支持的标记。</li>
</ul>
<h4 id="2-语法"><a href="#2-语法" class="headerlink" title="(2)语法"></a>(2)语法</h4><table>
<thead>
<tr>
<th></th>
<th>HTML的语法（较随意）</th>
<th>XML的语法(简明)</th>
</tr>
</thead>
<tbody>
<tr>
<td>有起始标签是否必须出现结束标签/关闭标签</td>
<td>未必，例如HTML中的<img>标签</td>
<td>是</td>
</tr>
<tr>
<td>标签大小写意义是否相同</td>
<td>相同</td>
<td>不同</td>
</tr>
<tr>
<td>标签嵌套顺序是否不能错</td>
<td>无所谓</td>
<td>是</td>
</tr>
<tr>
<td>是否必须要有根元素</td>
<td>无所谓</td>
<td>是</td>
</tr>
<tr>
<td>属性值是否必须加“”</td>
<td>加不加都可以</td>
<td>是</td>
</tr>
<tr>
<td>空格是否被保留</td>
<td>裁减为一个空格</td>
<td>均被保留</td>
</tr>
<tr>
<td>所有的特性是否必须有值</td>
<td>未必，如nowrap特性</td>
<td>是</td>
</tr>
</tbody>
</table>
<h4 id="3-XML语法找错"><a href="#3-XML语法找错" class="headerlink" title="(3)XML语法找错"></a>(3)XML语法找错</h4><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/4-2.png?raw=true" alt=""></p>
<ul>
<li><code>&lt;/vendor&gt;</code>大小写不对</li>
<li>第五行没有关闭标签<code>&lt;/Name&gt;</code></li>
<li><code>&lt;/Price&gt;</code>位置不对</li>
</ul>
<h2 id="五-SA设计"><a href="#五-SA设计" class="headerlink" title="五.SA设计"></a>五.SA设计</h2><h3 id="1-设计原理"><a href="#1-设计原理" class="headerlink" title="1.设计原理"></a>1.设计原理</h3><h4 id="1-耦合和内聚原理★★★"><a href="#1-耦合和内聚原理★★★" class="headerlink" title="(1)耦合和内聚原理★★★"></a>(1)耦合和内聚原理★★★</h4><ul>
<li><p>模块间的耦合度是指模块之间的依赖关系，包括控制关系、调用关系、数据传递关系。</p>
</li>
<li><p>内聚性是模块内部的相互依赖程度</p>
</li>
<li><p>耦合度等级划分：</p>
<p>|  耦合度  |             描述              |<br>| :—: | :————————-: |<br>| 非直接耦合 | 两模块之间的联系完全是通过主模块的控制和调用来实现的  |<br>| 数据耦合  |  一个模块访问另一模块，通过简单数据参数来交换信息   |<br>| 标记耦合  | 一组模块通过参数表传递记录信息，这个记录不是简单变量  |<br>| 控制耦合  | 一个模块通过传递开关、标志、名字等控制信息控制另一模块 |<br>| 外部耦合  |       一组模块都访问同一全局简单变量       |<br>| 公共耦合  |      一组模块都访问同一个公共数据环境       |<br>| 内容耦合  | 一个模块直接修改另一模块的数据，或直接转入另一个模块  |</p>
</li>
<li><p>内聚度等级划分：</p>
<p>| 内聚类型 |             描述             |<br>| :–: | :————————: |<br>| 功能内聚 |   完成一个单一功能，各部分协同工作，缺一不可    |<br>| 顺序内聚 |       处理元素相关，必须顺序执行        |<br>| 通信内聚 |    所有处理元素集中在一个数据结构的区域上     |<br>| 过程内聚 |     处理元素相关，必须按照特定的次序执行     |<br>| 瞬时内聚 | 所包含的任务必须在同一时间间隔内执行(如初始化模块) |<br>| 逻辑内聚 |        完成逻辑上相关的一组任务        |<br>| 偶然内聚 |      完成一组没有关系或松散关系的任务      |</p>
</li>
</ul>
<blockquote>
<p>习题</p>
<p>模块间的耦合度是指模块之间的依赖关系，其中不包括哪个关系？D</p>
<p>A.控制关系                 B.调用关系        C.数据传递关系             D.继承关系</p>
<p>耦合度最高的是内容耦合，应该尽量采用。(X尽量避免)</p>
<p>使用设计模式，将不用再考虑软件体系结构的现有的解决方案，因为模式自身就包含解决方案。(X)</p>
<p>SA设计的重要性体现在它包括了早期的设计决定，体现了系统的全局结构，极大地影响整个系统的质量。(√)</p>
</blockquote>
<h4 id="2-抽象原理★★"><a href="#2-抽象原理★★" class="headerlink" title="(2)抽象原理★★"></a>(2)抽象原理★★</h4><ul>
<li>抽象是人们透过事务繁杂的表面现象，揭示事物本质特征的方法，也是软件体系结构设计中要用到的基本原理。</li>
<li>抽象可分为两类：<ol>
<li>过程抽象：任何一个具体的操作序列，若他们完成一项逻辑意义上的功能，则其使用者都可以把它看做一个单一的逻辑概念。</li>
<li>数据抽象：将数据类型和施加于该类型对象的上的操作作为整体来定义，并限定了对象的值只能通过使用这些操作修改和观察。</li>
</ol>
</li>
<li>抽象是封装的基础，有助于处理系统复杂性，有助于减少部件耦合，有助于接口与实现分离。</li>
</ul>
<h4 id="3-封装原理★★"><a href="#3-封装原理★★" class="headerlink" title="(3)封装原理★★"></a>(3)封装原理★★</h4><ul>
<li>封装是将事物的属性和行为结合在一起，并且保护事物内部信息不受破坏的一种方式。封装使不同的抽象之间有了明确的界限。</li>
<li>封装有助于非功能特性的实现，例如可变性和可重用性。</li>
<li>封装由两方面组成：<ol>
<li>内部构成</li>
<li>操作服务</li>
</ol>
</li>
<li>封装与信息隐藏之间有着密切的联系，封装为信息隐藏提供了支持。</li>
</ul>
<h4 id="4-信息隐藏原理★★"><a href="#4-信息隐藏原理★★" class="headerlink" title="(4)信息隐藏原理★★"></a>(4)信息隐藏原理★★</h4><ul>
<li>信息隐藏对用户隐藏了部件的实现细节。因此，可以用来更好的处理系统的复杂性和减少各模块之间的耦合。</li>
</ul>
<h4 id="5-模块化原理★"><a href="#5-模块化原理★" class="headerlink" title="(5)模块化原理★"></a>(5)模块化原理★</h4><ul>
<li>模块化主要关心的是如何将一个软件系统分解成多个子系统和部件。</li>
<li>在体系结构设计中，如果注重了模块化的概念就可以限制更改设计所造成的影响范围。</li>
</ul>
<h4 id="6-注意点分离原理★"><a href="#6-注意点分离原理★" class="headerlink" title="(6)注意点分离原理★"></a>(6)注意点分离原理★</h4><ul>
<li>不同的和无关联的责任应该出现在系统不同的部件中，让他们相互独立的分离开来。</li>
<li>相互协作完成某一个特定任务的部件也应该和在其他任务中执行的计算部件分离开来。</li>
<li>如果一个部件在不同的环境下扮演着不同的角色，在部件中这些角色应该独立且相互分离。</li>
</ul>
<h4 id="7-接口和实现分离原理★★"><a href="#7-接口和实现分离原理★★" class="headerlink" title="(7)接口和实现分离原理★★"></a>(7)接口和实现分离原理★★</h4><ul>
<li>在软件体系结构中，任何一个部件都包括了两个部分：接口和实现。<ul>
<li>接口部分给出了部件所提供的功能的定义，并对功能的使用方法进行了规范。部件的客户可以访问接口。</li>
<li>实现部分包括了实际代码，对部件的客户不可用。</li>
</ul>
</li>
<li>接口和实现分离的部件更容易在系统中进行改变，尤其是不影响接口的改变，比如性能的提升。</li>
</ul>
<h4 id="8-分而治之原理★"><a href="#8-分而治之原理★" class="headerlink" title="(8)分而治之原理★"></a>(8)分而治之原理★</h4><ul>
<li>将大问题分解成小问题，经常用作注意点分离原理的方法。(横向分割)</li>
</ul>
<h4 id="9-层次化原理★"><a href="#9-层次化原理★" class="headerlink" title="(9)层次化原理★"></a>(9)层次化原理★</h4><ul>
<li>纵向分割复杂的问题。原理和优缺点同层次系统风格。</li>
</ul>
<blockquote>
<p>题目</p>
<p>一个模块内包含的信息，对于不需要这些信息的模块是不能访问的，这体现了多个设计原理的共同要求。(√)</p>
<p>耦合度最高的是内容耦合，应该尽量采用。(X)</p>
<p>对接口和实现分离原理的贯彻，可以保证用户在使用方式与习惯不变的情况下，享受运行性能的提升。(√改实现不改接口)</p>
</blockquote>
<h3 id="2-元模型"><a href="#2-元模型" class="headerlink" title="2.元模型"></a>2.元模型</h3><ul>
<li>元模型是对各种体系结构设计模型的抽象。</li>
</ul>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/5-1.png?raw=true" alt=""></p>
<ul>
<li>需求规格说明用来表示规格说明，该规格说明描述了所要开发的体系结构的系统需求。</li>
<li>解决方案抽象定义了体系结构中(子)结构的概念表示。</li>
<li>体系结构描述定义了软件体系结构的规格说明。</li>
</ul>
<blockquote>
<p>题目</p>
<p>各种不同的体系结构设计方法都可以描述成元模型的实例，只是在过程的顺序及概念的特定内容上有所不同。(√)</p>
<p>元模型中，需求规格说明关注SA中子系统和模块的需求，而解决方案抽象关注SA的系统需求。(X相反)需求规格说明关注SA的系统需求，解决方案抽象关注SA中子系统和模块的需求。</p>
<p>用例的使用在IBM RUP中被推崇备至，整个RUP流程都被称作是“用例驱动”(Use-Case Driven)的。(√)</p>
</blockquote>
<h2 id="六-基于SA的软件开发过程"><a href="#六-基于SA的软件开发过程" class="headerlink" title="六.基于SA的软件开发过程"></a>六.基于SA的软件开发过程</h2><h3 id="1-SA设计在开发过程中的位置地位"><a href="#1-SA设计在开发过程中的位置地位" class="headerlink" title="1.SA设计在开发过程中的位置地位"></a>1.SA设计在开发过程中的位置地位</h3><ul>
<li>软件体系结构设计是软件需求与软件设计之间的桥梁。</li>
</ul>
<h3 id="2-F16例子对导出SA需求有什么借鉴"><a href="#2-F16例子对导出SA需求有什么借鉴" class="headerlink" title="2.F16例子对导出SA需求有什么借鉴"></a>2.F16例子对导出SA需求有什么借鉴</h3><ol>
<li>分析体系结构需求的三个来源，即系统的质量目标、系统的业务目标、将在该系统上工作的人员的业务目标（人员目标很重要）。</li>
<li>需求来自于许多系统相关人员，尤其是直接使用者。</li>
<li>应综合考虑质量属性（需求要具体）。</li>
</ol>
<h3 id="3-瓦萨号"><a href="#3-瓦萨号" class="headerlink" title="3.瓦萨号"></a>3.瓦萨号</h3><ul>
<li>导出体系结构需求——<ul>
<li>体系结构需求的三个来源——质量目标★、业务目标、人员目标</li>
<li>特定质量场景</li>
<li>系统相关人员中应有评估、监理专家团队</li>
</ul>
</li>
<li>进行SA设计——<ul>
<li>体系结构的构造（功能构造）</li>
<li>验证——首选质量场景</li>
<li>开发过程分析</li>
</ul>
</li>
</ul>
<blockquote>
<p>基于体系结构的软件开发过程六个步骤：</p>
<ol>
<li><p>导出体系结构需求</p>
</li>
<li><p>==设计体系结构==</p>
</li>
<li><p>==文档化体系结构==</p>
</li>
<li><p>==分析体系结构==</p>
</li>
<li><p>实现体系结构</p>
</li>
<li><p>维护体系结构</p>
<p>2 、 3 、 4步可以重复执行</p>
<p>每个步骤都包括：输入（包括收集此信息的手段）、验证活动、输出。</p>
</li>
</ol>
<p>瓦萨号的例子告诉我们——</p>
<p>妄想实现所有需求，只会产生脆弱的一无是处的架构。另外，比起仅仅满足客户所要求的功能，软件的成功更为重要。    </p>
<p>举例说明——设计出来的新系统虽然满足了技术上的规范，但并没有达到客户可接受的程度。用户总是抱怨用户界面运行缓慢，并且新的数据文件所占用的磁盘空间太大。是什么导致了用户期望与产品实际性能之间的期望差异？        ——==对质量属性的权衡取舍工作没做好==</p>
</blockquote>
<h2 id="七-SA评估"><a href="#七-SA评估" class="headerlink" title="七.SA评估"></a>七.SA评估</h2><h3 id="1-质量属性"><a href="#1-质量属性" class="headerlink" title="1.质量属性"></a>1.质量属性</h3><ul>
<li>产品的易用程度，执行速度，可靠性；当发生异常情况时，系统如何处理。这些被称为==软件质量属性==(或质量因素)的特性，是系统非功能（也叫非行为）部分的需求。</li>
<li>质量属性——是一个组件或一个系统的非功能性特征，提供了测量和分析质量的上下文。</li>
<li>具体的质量属性包括了性能、可靠性、可用性、安全性、可修改性、功能性、可变性、可集成性、互操作性等等。</li>
</ul>
<blockquote>
<p>对各质量属性的区分（用户）</p>
<ul>
<li><p>有效性——指的是在预定的启动时间中，系统真正可用并且完全运行时间所占的百分比</p>
<ul>
<li>工作日期间，在当地时间早上6点到午夜，系统的有效性至少达到9 9 . 5 %，在下午4点到6点，系统的有效性至少可达到9 9 . 9 5 %</li>
</ul>
</li>
<li><p>效率——是用来衡量系统如何优化处理器、磁盘空间或通信带宽的（ Davis 1993）。如果系统用完了所有可用的资源，那么用户遇到的将是性能的下降，这是效率降低的一个表现。</p>
<ul>
<li>在预计的高峰负载条件下， 1 0 %处理器能力和1 5 %系统可用内存必须留出备用。</li>
</ul>
</li>
<li><p>灵活性——就像我们所知道的可扩充性、增加性、可延伸性和可扩展性一样，灵活性表明了在产品中增加新功能时所需工作量的大小。</p>
<ul>
<li>一个至少具有6个月产品支持经验的软件维护程序员可以在一个小时之内为系统添加一个新的可支持硬拷贝的输出设备。</li>
</ul>
</li>
<li><p>完整性——完整性（或安全性）主要涉及：防止非法访问系统功能、防止数据丢失、防止病毒入侵并防止私人数据进入系统。</p>
<ul>
<li>只有拥有查账员访问特权的用户才可以查看客户交易历史。</li>
</ul>
</li>
<li><p>互操作性——表明了产品与其它系统交换数据和服务的难易程度。</p>
<ul>
<li>化学制品跟踪系统应该能够从C h e m i D r a w和C h e m - S t r u c t工具中导入任何有效化学制品结构图。</li>
</ul>
</li>
<li><p>可靠性——是软件无故障执行一段时间的概率（Musa, Iannino and Okumoto 1987）。健壮性和有效性有时可看成是可靠性的一部分。</p>
<ul>
<li>由于软件失效引起实验失败的概率应不超过5‰</li>
</ul>
</li>
<li><p>健壮性——指的是当系统或其组成部分遇到非法输入数据、相关软件或硬件组成部分的缺陷或异常的操作情况时，能继续正确运行功能的程度。</p>
<ul>
<li>所有的规划参数都要指定一个缺省值，当输入数据丢失或无效时，就使用缺省值数据。</li>
</ul>
</li>
<li><p>可用性——也称为“易用性”和“人类工程”，它所描述的是许多组成“用户友好”的因素。可用性衡量准备输入、操作和理解产品输出所花费的努力。</p>
<ul>
<li>一个培训过的用户应该可以在平均3分钟或最多5分钟时间以内，完成从供应商目录表中请求一种化学制品的操作。</li>
</ul>
</li>
</ul>
<p>对各质量属性的区分（开发者和维护者）</p>
<ul>
<li>可维护性——表明了在软件中纠正一个缺陷或做一次更改的简易程度。可维护性取决于理解软件、更改软件和测试软件的简易程度，可维护性与灵活性密切相关。<ul>
<li>在接到来自联邦政府修订的化学制品报告的规定后，对于现有报表的更改操作必须在一周内完成。</li>
</ul>
</li>
<li>可移植性——是度量把一个软件从一种运行环境转移到另一种运行环境中所花费的工作量。<ul>
<li>该应用软件系统各个模块都可以在x86机器上运行，且其中的大部分功能模块也可以在iMac机器上运行，剩下的少量功能模块经修改后，也可在iMac机器上运行。</li>
</ul>
</li>
<li>可重用性——从软件开发的长远目标上看，可重用性表明了一个软件组件除了在最初开发的系统中使用之外，还可以在其它应用程序中使用的程度。<ul>
<li>设计单机版媒体播放器系统时，还要保证核心的播放模块可以在将来开发的联机版媒体播放器系统中使用。</li>
</ul>
</li>
<li>可测试性——指的是测试软件组件或集成产品时查找缺陷的简易程度。<ul>
<li>随着图形引擎功能的不断增强，我们需要对它进行多次测试，所以作出了如下的设计目标：“一个模块的最大循环复杂度不能超过2 0。”</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-几种评估方式以及各自的特点"><a href="#2-几种评估方式以及各自的特点" class="headerlink" title="2.几种评估方式以及各自的特点"></a>2.几种评估方式以及各自的特点</h3><ol>
<li>基于调查问卷、检查表<ul>
<li>自由灵活，但因人而异——主观性强</li>
</ul>
</li>
<li>基于场景★★<ul>
<li>SEI at CMU的评估方法</li>
</ul>
</li>
<li>基于度量★<ul>
<li>能提供更为客观和量化的质量评估，不过需要在SA设计基本完成之后进行——较客观</li>
</ul>
</li>
</ol>
<ul>
<li>==评估过程=论证SA对关键场景的支持程度==</li>
</ul>
<h3 id="3-SAAM-ATAM"><a href="#3-SAAM-ATAM" class="headerlink" title="3.SAAM/ATAM"></a>3.SAAM/ATAM</h3><h4 id="1-SAAM软件体系结构分析法"><a href="#1-SAAM软件体系结构分析法" class="headerlink" title="(1)SAAM软件体系结构分析法"></a>(1)SAAM软件体系结构分析法</h4><ul>
<li>SAAM法仅仅考虑场景和体系结构的关系，也不涉及太多的步骤和独特的技术。是一种理想的入门方法。</li>
<li>SAAM法实质上是对检查表法的进一步完善，它首先把要检查的事物的属性列举出来，再对各个属性进行”检查”，使思路更广，目标更明确。</li>
<li>SAAM分析评估体系结构的过程包括6个步骤:<ol>
<li>通过风险承担者协商讨论，开发一些任务场景，体现系统所支持的各种活动。(场景生成)</li>
<li>用一种易于理解的、合乎语法规则的体系结构描述SA，体现系统的计算构件、数据构件以及构件之间的关系。(体系结构描述)</li>
<li>区分直接场景（不需要修改SA的场景）和间接场景，设置优先级（从重要到次要）。(场景的分类和优先级确定)</li>
<li>对于间接场景，要估计修改SA以实现它的代价。(间接场景的单独评估)</li>
<li>通过对场景交互（多个间接场景要求更改同一个组件）的分析，能得出系统中所有场景对系统中的构件所产生的影响的列表。(对场景关联的评估)</li>
<li>对场景和场景间的交互作一个总体的权衡和评价，设置权值，得出总体评价。(形成总体评估)</li>
</ol>
</li>
</ul>
<h4 id="2-ATAM体系结构权衡分析法"><a href="#2-ATAM体系结构权衡分析法" class="headerlink" title="(2)ATAM体系结构权衡分析法"></a>(2)ATAM体系结构权衡分析法</h4><ul>
<li><p>ATAM是评价软件构架的一种综合全面的方法。这种方法不仅可以揭示出构架满足特定质量目标的情况，而且（因为它认识到了构架决策会影响多个质量属性）可以使我们更清楚地认识到质量目标之间的联系——即如何权衡诸多质量目标。</p>
</li>
<li><p>体系结构的敏感点和权衡点</p>
<ul>
<li>敏感点：会被某些体系结构元素显著影响的系统模型的属性值。</li>
<li>权衡点：系统内与几个敏感点都相关的地方。</li>
</ul>
</li>
<li><p>ATAM的评估步骤</p>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/SA/7-1.png?raw=true" alt=""></p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业三/" itemprop="url">
                  算法作业三
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:55:58+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业三/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业三/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业三/" class="leancloud_visitors" data-flag-title="算法作业三">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第三次作业"><a href="#第三次作业" class="headerlink" title="第三次作业"></a>第三次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="3-1"><a href="#3-1" class="headerlink" title="3-1"></a>3-1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZuiChangDanDiaoDiZengZiXuLie</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[] ZCDDZDZXL(<span class="keyword">int</span>[] a)&#123;</div><div class="line">		<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>,k=<span class="number">0</span>,n=a.length;</div><div class="line">		<span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[n]; </div><div class="line">		<span class="comment">//b数组的各个元素负责存储以a数组中序号对应的各个元素为结尾的最长单调子序列长度</span></div><div class="line">		b[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(;i&lt;n;i++)&#123;</div><div class="line">			<span class="keyword">for</span>(;j&lt;i;j++)&#123; </div><div class="line">				<span class="keyword">if</span>(a[j]&lt;=a[i]&amp;&amp;k&lt;b[j])</div><div class="line">					k=b[j];</div><div class="line">			&#125;</div><div class="line">			b[i] = k+<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> maxLength(n, b);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[] maxLength(<span class="keyword">int</span> n,<span class="keyword">int</span>[] b)&#123;</div><div class="line">		<span class="keyword">int</span> temp=<span class="number">0</span>,i=<span class="number">0</span>,flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(;i&lt;n;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(b[i]&gt;temp)&#123;</div><div class="line">				temp=b[i];</div><div class="line">				flag = i;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span>[] msg = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">		msg[<span class="number">0</span>] = flag;</div><div class="line">		msg[<span class="number">1</span>] = temp;</div><div class="line">		<span class="keyword">return</span> msg;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ZuiChangDanDiaoDiZengZiXuLie xuLie = <span class="keyword">new</span> ZuiChangDanDiaoDiZengZiXuLie();</div><div class="line">		<span class="keyword">int</span>[] a = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</div><div class="line">		<span class="keyword">int</span>[] length = xuLie.ZCDDZDZXL(a);</div><div class="line">		System.out.println(<span class="string">"子序列末尾元素角标"</span>+length[<span class="number">0</span>]+<span class="string">"\n最长单调递增子序列长度"</span>+length[<span class="number">1</span>]);</div><div class="line">		<span class="keyword">int</span> biggest=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</div><div class="line">				System.out.println(a[i]);</div><div class="line">				biggest = a[i];</div><div class="line">			&#125;<span class="keyword">else</span></div><div class="line">				<span class="keyword">if</span>(a[i]&gt;=biggest)&#123;</div><div class="line">					System.out.println(a[i]);</div><div class="line">					biggest = a[i];</div><div class="line">				&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/Algorithm/ZCDDDZZXL.png?raw=true" alt=""></p>
<h3 id="3-2"><a href="#3-2" class="headerlink" title="3-2"></a>3-2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdvancedZCDDDZZXL</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LIS</span><span class="params">(<span class="keyword">int</span>[] a)</span></span>&#123;</div><div class="line">		<span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[a.length];</div><div class="line">		b[<span class="number">1</span>] = a[<span class="number">0</span>];</div><div class="line">		<span class="keyword">int</span> k = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a.length;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(a[i]&gt;=b[k])&#123;</div><div class="line">				b[++k] = a[i];</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				b[binary(i, k, a, b)] = a[i];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> k;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">binary</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> k,<span class="keyword">int</span>[] a,<span class="keyword">int</span>[] b)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(a[i]&lt;b[<span class="number">1</span>])</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> j=k;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> h=<span class="number">1</span>;h!=j-<span class="number">1</span>;)&#123;</div><div class="line">			<span class="keyword">if</span>(b[k=(h+j)/<span class="number">2</span>]&lt;=a[i])</div><div class="line">				h=k;</div><div class="line">			<span class="keyword">else</span></div><div class="line">				j=k;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> j;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-4"><a href="#3-4" class="headerlink" title="3-4"></a>3-4</h3><ul>
<li><p>该问题是二维0-1背包问题。</p>
</li>
<li><p>对于给定的$$c&gt;0,d&gt;0,\omega_i&gt;0,b_i&gt;0,v_i&gt;0, 1\le{i}\le{n}$$</p>
</li>
<li><p>要求找出<em>n</em>元0-1向量$$(x_1,x_2,…,x_n),x<em>i\in{0,1},1\le{i}\le{n}$$使得$$\sum</em>{i=1}^{n}\omega_ix<em>i\le{c}, \sum</em>{i=1}^nb_ix<em>i\le{d}$$而且使$$\sum</em>{i=1}^nv_ix_i$$达到最大值。</p>
</li>
<li><p>由此可知，二维0-1背包问题是整数规划问题。<br>$$<br>max\sum_{i=1}^{n}v_ix<em>i\<br>\left{<br>\begin{array}\<br>\sum</em>{i=1}^{n}\omega_ix<em>i\le{c}\<br>\sum</em>{i=1}^{n}b_ix_i\le{d}\<br>x_i\in{0,1},1\le{i}\le{n}<br>\end{array}<br>\right.<br>$$</p>
</li>
</ul>
<ul>
<li>该问题具有最优子结构性质。设该问题的子问题<br>$$<br>max\sum_{t=i}^{n}v_tx<em>t\<br>\left{<br>\begin{array}\<br>\sum</em>{t=i}^{n}\omega_tx<em>t\le{j}\<br>\sum</em>{t=i}^{n}b_tx_t\le{k}\<br>x_i\in{0,1},i\le{t}\le{n}<br>\end{array}<br>\right.<br>$$</li>
</ul>
<p>  的最优解为$$m(i,j,k)$$，背包容量为<em>j</em>，容积为<em>k</em>，可选择的物品为$$i,i+1,…,n$$时该问题的最优值。</p>
<ul>
<li>由二维0-1背包问题的最优子结构性质，可得：<br>$$<br>m(i,j,k)=\left{<br>\begin{array}\<br>max{m(i+1,j),m(i+1,j-\omega_i,k-b_i)+v_i}\ \ \ \ j\ge\omega_i且k\ge{b_i}\<br>m(i+1,j)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0\le{j}\le{\omega_i}或0\le{k}\le{b_i}<br>\end{array}<br>\right.<br>$$</li>
</ul>
<p>$$<br>m(n,j,k) =<br>\left{<br>\begin{array}\<br>v_n \ \ \ \ \ j\ge{\omega_n}且k\ge{b_n}\<br>0 \ \ \ \ \ \ \ 0\le{j}&lt;{\omega_n}或0\le{k}&lt;b_n<br>\end{array}<br>\right.<br>$$</p>
<ul>
<li>由上式可知$$m(n,c,d)$$为最优值。算法所需的计算时间为$$O(ncd)$$。</li>
</ul>
<h3 id="4-1"><a href="#4-1" class="headerlink" title="4-1"></a>4-1</h3><ul>
<li>设变量$$x_i=1$$表示将$$l_i$$存放在$$T_1$$上，并且$$T_1$$的检索时间短于$$T<em>2$$<br>$$<br>\sum</em>{i=1}^{n}l_ix<em>i\le\sum</em>{i=1}^{n}l_i(1-x<em>i)\<br>\sum</em>{i=1}^{n}l_ix<em>i\le\frac{1}{2}\sum</em>{i=1}^{n}l_i<br>$$</li>
</ul>
<p>$$T<em>1$$的检索时间应取最大值，即<br>$$<br>max\sum</em>{i=1}^{n}l_ix<em>i\<br>使得\sum</em>{i=1}^{n}l_ix<em>i\le\frac{1}{2}\sum</em>{i=1}^{n}l_i<br>$$</p>
<h3 id="最小生成树算法的正确性"><a href="#最小生成树算法的正确性" class="headerlink" title="最小生成树算法的正确性"></a>最小生成树算法的正确性</h3><h4 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h4><p>  Prim算法的思路是，从任意一个顶点开始，把这个顶点作为最初的最小生成树的子树，通过逐步地为当前的子树添加新边来生成最终的最小生成树，添加的策略是，每次只添加从外部连接到该子树的所有边中的最短边。</p>
<p>  对于任意一个顶点vi，连接到该顶点的所有边中的一条最短边$$(v_i,v_j)$$必然属于最小生成树。</p>
<p>  假设最小生成树已经建成，$$(v_i,v_j)$$是连接到顶点vi的最短边，在最小生成树中取出vi，断开连接到vi的边，则生成树被拆分成</p>
<ol>
<li>顶点$$v_i$$</li>
<li>顶点$$v_j$$所在的连通分量（单独一个顶点也看作一个独立的连通分量）</li>
<li>其余若干个连通分量（个数大于等于0）</li>
</ol>
<p>  三个部分</p>
<p>  现在要重建生成树，就要重新连接之前被断开的各边。</p>
<p>  虽然不知道之前被断开的都是哪几条边，但是可以通过这样一个简单的策略来重建连接：将$$v_i$$分别以最小的成本逐个连接到这若干个互相分离的连通分量。具体来说，就是要分别遍历顶点$$v_i$$到某个连通分量中的所有顶点的连接，然后选择其中最短的边来连接$$v_i$$和该连通分量；而要将$$v_i$$连接到$$v_j$$所在的连通分量，显然通过边$$(v_i,v_j)$$连接的成本最低，所以边$$(v_i,v_j)$$必然属于最小生成树（如果连接到$$v_i$$的最短边不止一条，只要任意挑选其中的一条$$(v_i,v_j)$$即可，以上的证明对于这种情况同样适用）。这样我们就为原来只有一个顶点$$v_i$$的子树添加了一个新的顶点vj及新边$$(v_i,v_j)$$。接下来只要将这棵新子树作为一个连通子图，并且用这个连通子图替换顶点$$v_i$$重复以上的分析，迭代地为子树逐个地添加新顶点和新边即可。</p>
<h4 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h4><p>  Kruskal算法通过从小到大遍历边集，每次尝试为最小生成树加入当前最短的边，加入成功的条件是该边不会在当前已构建的图中造成回路，当加入的边的数目达到n-1，遍历结束。</p>
<p>  Kruskal算法每次为当前的图添加一条不会造成回路的新边，其本质是逐步地连接当前彼此分散的各个连通分量（单个顶点也算作一个连通分量），而连接的策略是每次只用最小的成本连接任意两个连通分量。这个策略之所以能够实现，是因为每加入一条边之后只会出现两种结果：</p>
<ol>
<li>在已有的连通分量中形成回路</li>
<li>连接两个彼此独立的连通分量</li>
</ol>
<p>  所以，通过从小到大遍历边集，判断是否会造成回路，然后逐条添加新边就可以实现上诉的连接策略。</p>
<p>  如果某个连通图属于最小生成树，那么所有从外部连接到该连通图的边中的一条最短的边必然属于最小生成树当最小生成树被拆分成彼此独立的若干个连通分量的时候，因为该边必然是这两个连通分量的可以连接到外部的最短边，所以所有能够连接任意两个连通分量的边中的一条最短边必然属于最小生成树。</p>
<p>  由此也就证明了，Kruskal算法通过每次以最小的成本来连接两个连通分量的策略确实可以正确地生成最小生成树。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业二/" itemprop="url">
                  算法作业二
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:55:02+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业二/" class="leancloud_visitors" data-flag-title="算法作业二">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第二次作业"><a href="#第二次作业" class="headerlink" title="第二次作业"></a>第二次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="2-2"><a href="#2-2" class="headerlink" title="2-2"></a>2-2</h3><h4 id="1-left和right游标的调整不正确，应改为："><a href="#1-left和right游标的调整不正确，应改为：" class="headerlink" title="(1)left和right游标的调整不正确，应改为："></a>(1)left和right游标的调整不正确，应改为：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(x&gt;a[middle]) left = middle+<span class="number">1</span>;</div><div class="line"><span class="keyword">else</span> right = middle<span class="number">-1</span>;</div></pre></td></tr></table></figure>
<h4 id="2-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。"><a href="#2-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。" class="headerlink" title="(2)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。"></a>(2)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。</h4><h4 id="3-同上，查找元素为x-a-n-1-时错误。"><a href="#3-同上，查找元素为x-a-n-1-时错误。" class="headerlink" title="(3)同上，查找元素为x=a[n-1]时错误。"></a>(3)同上，查找元素为x=a[n-1]时错误。</h4><h4 id="4-left和right游标的调整不正确，查找大于中值的数时可能进入死循环。"><a href="#4-left和right游标的调整不正确，查找大于中值的数时可能进入死循环。" class="headerlink" title="(4)left和right游标的调整不正确，查找大于中值的数时可能进入死循环。"></a>(4)left和right游标的调整不正确，查找大于中值的数时可能进入死循环。</h4><h4 id="5-没什么问题"><a href="#5-没什么问题" class="headerlink" title="(5)没什么问题"></a>(5)没什么问题</h4><h4 id="6-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。"><a href="#6-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。" class="headerlink" title="(6)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。"></a>(6)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。</h4><h4 id="7-left和right游标的调整不正确，查找元素为x-a-0-时错误。"><a href="#7-left和right游标的调整不正确，查找元素为x-a-0-时错误。" class="headerlink" title="(7)left和right游标的调整不正确，查找元素为x=a[0]时错误。"></a>(7)left和right游标的调整不正确，查找元素为x=a[0]时错误。</h4><h3 id="2-3"><a href="#2-3" class="headerlink" title="2-3"></a>2-3</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(T a[], <span class="keyword">const</span> T &amp;x, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> &amp;i, <span class="keyword">int</span> j)</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">int</span> middle;</div><div class="line">  	<span class="keyword">while</span>(left&lt;=right)&#123;</div><div class="line">      middle = (left+right)/<span class="number">2</span>;</div><div class="line">      <span class="keyword">if</span>(x==a[middle])&#123;</div><div class="line">        i=middle;j=middle;<span class="keyword">return</span> middle;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span>(x&gt;a[middle]) left = middle+<span class="number">1</span>;</div><div class="line">      <span class="keyword">else</span> right = middle<span class="number">-1</span>;</div><div class="line">  	&#125;</div><div class="line">  	i=right;j=left;<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="2-4"><a href="#2-4" class="headerlink" title="2-4"></a>2-4</h3><p>当m远小于n时，可以将大整数v分成n/m个长度为m的小段。计算u*v需要计算n/m次m位乘法，每一次m位乘法采用分治法计算，需要$$O(m^{log_23})$$时间。总时间为$$O(\frac{n}{m}<em>m^{log_23})=O(n</em>m^{log_2{\frac{3}{2}}})$$</p>
<h3 id="算法实现2-6"><a href="#算法实现2-6" class="headerlink" title="算法实现2-6"></a>算法实现2-6</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Zidianxu</span> </span>&#123;</div><div class="line">	String input = <span class="string">"/home/wang/input.txt"</span>;</div><div class="line">	String output = <span class="string">"/home/wang/output.txt"</span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String string)</span></span>&#123; </div><div class="line">		<span class="comment">//作用就是将传入的字符串写入指定的文件</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileOutputStream fileOutputStream = </div><div class="line">					<span class="keyword">new</span> FileOutputStream(output,<span class="keyword">false</span>);<span class="comment">//覆写模式</span></div><div class="line">			OutputStreamWriter outputStreamWriter = </div><div class="line">					<span class="keyword">new</span> OutputStreamWriter(fileOutputStream,<span class="string">"UTF-8"</span>);</div><div class="line">			BufferedWriter bufferedWriter =</div><div class="line">					<span class="keyword">new</span> BufferedWriter(outputStreamWriter);</div><div class="line">			bufferedWriter.write(string);</div><div class="line">			bufferedWriter.flush();</div><div class="line">			bufferedWriter.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">jieCheng</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</div><div class="line">		<span class="comment">//求阶乘</span></div><div class="line">		<span class="keyword">int</span> result=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=i;j++)&#123;</div><div class="line">			result*=j;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">char</span>[] next(<span class="keyword">char</span>[] s)&#123;</div><div class="line">		<span class="comment">//求下一个排列</span></div><div class="line">		<span class="keyword">char</span>[] result=s;</div><div class="line">		<span class="keyword">int</span> last = s.length-<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=last-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</div><div class="line">			<span class="keyword">if</span>(s[i]&lt;s[last])&#123;</div><div class="line">				<span class="comment">//最右边的数，从右往左，遇到第一个比它小的数时，</span></div><div class="line">				<span class="comment">//排列到这个数的前面，这个数以后依次后移一位。</span></div><div class="line">				<span class="keyword">char</span> temp = s[last];</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j=last-<span class="number">1</span>;j&gt;=i;j--)&#123;</div><div class="line">					result[j+<span class="number">1</span>] = result[j];</div><div class="line">				&#125;</div><div class="line">				result[i] = temp;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file = <span class="keyword">new</span> File(input);</div><div class="line">			BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file));</div><div class="line">			String string = <span class="keyword">null</span>,out = <span class="string">""</span>;</div><div class="line">			</div><div class="line">			<span class="keyword">int</span> i=<span class="number">0</span>,nums=<span class="number">0</span>,value=<span class="number">0</span>,current=<span class="number">0</span>,nums2=<span class="number">0</span>;</div><div class="line">			<span class="comment">//i是行数计数，nums是排列的长度，value是字典序值</span></div><div class="line">			<span class="comment">//current是当前指向的数字，nums2只是复制一下nums</span></div><div class="line">			<span class="keyword">while</span>((string = reader.readLine()) != <span class="keyword">null</span>)&#123;</div><div class="line">				<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</div><div class="line">					nums = Integer.parseInt(string);</div><div class="line">					nums2=nums;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">else</span>&#123;</div><div class="line">					<span class="comment">//以26458173为例，选定一个数</span></div><div class="line">					<span class="comment">//看后面有几个比当前数小的，比如2后面比2小的只有1个，</span></div><div class="line">					<span class="comment">//6后面比6小的有4个，4后面比4小的有2个</span></div><div class="line">					<span class="comment">//8227=1*7!+4*6!+2*5!+...</span></div><div class="line">					<span class="keyword">char</span>[] array = string.toCharArray();</div><div class="line">					<span class="keyword">for</span>(;current&lt;nums-<span class="number">1</span>;current++)&#123;</div><div class="line">						<span class="comment">//从零下标开始依次往后扫描</span></div><div class="line">						<span class="comment">//counter用来数比这个数小的有几个数</span></div><div class="line">						<span class="keyword">int</span> scan = current+<span class="number">1</span>,counter=<span class="number">0</span>;</div><div class="line">						<span class="keyword">for</span>(;scan&lt;nums;scan++)&#123;</div><div class="line">							<span class="keyword">if</span>(array[current]&gt;array[scan])&#123;</div><div class="line">								counter++;</div><div class="line">							&#125;</div><div class="line">						&#125;</div><div class="line">						value+=counter*jieCheng(nums2-<span class="number">1</span>-current);</div><div class="line">					&#125;</div><div class="line">					out+=value+<span class="string">"\n"</span>;</div><div class="line">					<span class="keyword">char</span>[] result = next(array);</div><div class="line">					String result2 = String.valueOf(result);</div><div class="line">					out+=result2;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">			write(out);<span class="comment">//写出</span></div><div class="line">			reader.close();<span class="comment">//关闭BufferedReader</span></div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;		</div><div class="line">		Zidianxu zidianxu = <span class="keyword">new</span> Zidianxu();</div><div class="line">		zidianxu.read();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业一/" itemprop="url">
                  算法作业一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:53:54+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业一/" class="leancloud_visitors" data-flag-title="算法作业一">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第一次作业"><a href="#第一次作业" class="headerlink" title="第一次作业"></a>第一次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="1-1-求下列函数的渐进表达式"><a href="#1-1-求下列函数的渐进表达式" class="headerlink" title="1-1 求下列函数的渐进表达式"></a>1-1 求下列函数的渐进表达式</h3><p>$$<br>3n^2 + 10n = O(n^2)<br>$$</p>
<p>$$<br>\frac{n^2}{10} + 2^n = O(2^n)<br>$$</p>
<p>$$<br>21 + \frac{1}{n} = O(1)<br>$$</p>
<p>$$<br>log(n^3) = O(logn)<br>$$</p>
<p>$$<br>10log3^n = O(n)<br>$$</p>
<h3 id="1-4"><a href="#1-4" class="headerlink" title="1-4"></a>1-4</h3><h4 id="1"><a href="#1" class="headerlink" title="(1)"></a>(1)</h4><p>设在这台新机器上用同一算法在 <em>t</em> 秒内能解规模为$$n_1$$的问题<br>$$<br>3<em>2^n</em>64 = 3*2^{n_1}<br>$$</p>
<p>$$<br>n_1 = n + 6<br>$$</p>
<h4 id="2"><a href="#2" class="headerlink" title="(2)"></a>(2)</h4><p>设在这台新机器上用同一算法在 <em>t</em> 秒内能解规模为$$n_2$$的问题<br>$$<br>n^2*64 = n_2^2<br>$$</p>
<p>$$<br>n_2 = 8*n<br>$$</p>
<h4 id="3"><a href="#3" class="headerlink" title="(3)"></a>(3)</h4><p><em>T(n) = 8</em>与<em>n</em>无关，所以可以解输入规模任意大的问题。</p>
<h3 id="1-6"><a href="#1-6" class="headerlink" title="1-6"></a>1-6</h3><h4 id="1-1"><a href="#1-1" class="headerlink" title="(1)"></a>(1)</h4><p>$$<br>f(n) = logn^2 = 2*logn<br>$$</p>
<p>$$<br>g(n) = logn+5<br>$$</p>
<p><em>f(n)</em>与<em>g(n)</em>同阶，因此<br>$$<br>f(n) = \theta(g(n))<br>$$</p>
<h4 id="2-1"><a href="#2-1" class="headerlink" title="(2)"></a>(2)</h4><p>$$<br>f(n) = logn^2 = 2*logn<br>$$</p>
<p>$$<br>g(n) = \sqrt[2]{n} = n^{\frac{1}{2}}<br>$$</p>
<p>$$log_2n$$的反函数为$$2^n$$，而$$\sqrt[2]{n}$$的反函数为$$n^2$$，$$2^n$$的增长速度远高于$$n^2$$，因此$$log_2n$$的增长速度远小于$$\sqrt[2]{n}$$.因此<em>f(n)</em>的阶不高于<em>g(n)</em>的阶，也就是<br>$$<br>f(n) = O(g(n))<br>$$</p>
<h4 id="3-1"><a href="#3-1" class="headerlink" title="(3)"></a>(3)</h4><p>$$<br>f(n) = n<br>$$</p>
<p>$$<br>g(n) = log^2n<br>$$</p>
<p>$$<br>O(1)&lt;O(log_2n)&lt;O(n)&lt;O(log_2^2n)&lt;O(nlog_2n)<br>$$</p>
<p>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="4"><a href="#4" class="headerlink" title="(4)"></a>(4)</h4><p>$$<br>f(n) = nlog_2n + n = O(nlog_2n)<br>$$</p>
<p>$$<br>g(n) = log_2n = O(log_2n)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="5"><a href="#5" class="headerlink" title="(5)"></a>(5)</h4><p>$$<br>f(n) = 10 = O(1)<br>$$</p>
<p>$$<br>g(n) = log10 = O(1)<br>$$</p>
<p><em>f(n)</em>与<em>g(n)</em>同阶，因此<br>$$<br>f(n) = \theta(g(n))<br>$$</p>
<h4 id="6"><a href="#6" class="headerlink" title="(6)"></a>(6)</h4><p>$$<br>f(n) = O(log^2n)<br>$$</p>
<p>$$<br>g(n) = O(logn)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="7"><a href="#7" class="headerlink" title="(7)"></a>(7)</h4><p>$$<br>f(n) = 2^n = O(2^n)<br>$$</p>
<p>$$<br>g(n) = 100n^2 = O(n^2)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="8"><a href="#8" class="headerlink" title="(8)"></a>(8)</h4><p>$$<br>f(n) = O(2^n)<br>$$</p>
<p>$$<br>g(n) = O(3^n)<br>$$</p>
<p><em>f(n)</em>的阶不高于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = O(g(n))<br>$$</p>
<h3 id="算法实现1-2"><a href="#算法实现1-2" class="headerlink" title="算法实现1-2"></a>算法实现1-2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> first;</div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZiDianXuShengXu</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> lines=<span class="number">0</span>,count=<span class="number">0</span>;</div><div class="line">	String input = <span class="string">"/home/wang/dict.txt"</span>;</div><div class="line">	String output = <span class="string">"/home/wang/dict2.txt"</span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String string)</span></span>&#123; <span class="comment">//作用就是将传入的字符串写入指定的文件</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(output,<span class="keyword">false</span>);<span class="comment">//覆写模式</span></div><div class="line">			OutputStreamWriter outputStreamWriter = <span class="keyword">new</span> OutputStreamWriter(fileOutputStream,<span class="string">"UTF-8"</span>);</div><div class="line">			BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(outputStreamWriter);</div><div class="line">			bufferedWriter.write(string);</div><div class="line">			bufferedWriter.flush();</div><div class="line">			bufferedWriter.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file = <span class="keyword">new</span> File(input);</div><div class="line">			BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file));</div><div class="line">			String string = <span class="keyword">null</span>,out = <span class="string">""</span>;</div><div class="line">			</div><div class="line">			<span class="keyword">int</span> i=<span class="number">0</span>,lines=<span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span>((string = reader.readLine()) != <span class="keyword">null</span>)&#123;</div><div class="line">				<span class="keyword">if</span>(i==<span class="number">0</span>)</div><div class="line">					lines = Integer.parseInt(string); <span class="comment">//我想了想，好像不需要，所以就没用</span></div><div class="line">				<span class="keyword">else</span>&#123;</div><div class="line">					<span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">					<span class="keyword">char</span> temp = string.charAt(string.length()-<span class="number">1</span>);<span class="comment">//取出字符串最后一位</span></div><div class="line">					sum = temp - <span class="number">96</span> - string.length() + <span class="number">1</span>;<span class="comment">//先把最后一位加上</span></div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;string.length()-<span class="number">1</span>;j++)&#123;<span class="comment">//分别计算每一位</span></div><div class="line">						temp = string.charAt(j);</div><div class="line">						sum += (temp-<span class="number">96</span>-j)*(<span class="number">26</span>-j);<span class="comment">//每一位进制不同</span></div><div class="line">					&#125;</div><div class="line">					out+=sum+<span class="string">"\n"</span>;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">			write(out);<span class="comment">//写出所有的编码</span></div><div class="line">			reader.close();<span class="comment">//关闭BufferedReader</span></div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ZiDianXuShengXu ziDianXuShengXu = <span class="keyword">new</span> ZiDianXuShengXu();</div><div class="line">		ziDianXuShengXu.read();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/15/操作系统实验一/" itemprop="url">
                  操作系统实验一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-15T08:13:27+08:00" content="2017-03-15">
              2017-03-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/15/操作系统实验一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/15/操作系统实验一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/15/操作系统实验一/" class="leancloud_visitors" data-flag-title="操作系统实验一">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="向Linux内核增加一个系统调用"><a href="#向Linux内核增加一个系统调用" class="headerlink" title="向Linux内核增加一个系统调用"></a>向Linux内核增加一个系统调用</h1><h2 id="71115115-王子卓-2017年3月14日"><a href="#71115115-王子卓-2017年3月14日" class="headerlink" title="71115115 王子卓 2017年3月14日"></a>71115115 王子卓 2017年3月14日</h2><h2 id="一-实验目的"><a href="#一-实验目的" class="headerlink" title="一.实验目的"></a>一.实验目的</h2><p>  通过实验，熟悉Linux操作系统的使用，掌握构建与启动Linux内核的方法；掌握用户程序如何利用系统调用与操作系统内核实现通信的方法，加深对系统调用机制的理解；进一步掌握如何向操作系统内核增加新的系统调用的方法，以扩展操作系统的功能。 </p>
<h2 id="二-实验内容"><a href="#二-实验内容" class="headerlink" title="二.实验内容"></a>二.实验内容</h2><ol>
<li>Linux环境下的C或C++编译和调试工具的使用。</li>
<li>向Linux内核增加新的系统调用，系统调用名称和功能自行定义，但必须实现如下输出功能：“My Student No. is 71115115，and My Name is 王子卓”。</li>
<li>Linux新内核的编译、安装和配置。</li>
<li>编写应用程序以测试新的系统调用并输出测试结果。</li>
</ol>
<h2 id="三-实验步骤"><a href="#三-实验步骤" class="headerlink" title="三.实验步骤"></a>三.实验步骤</h2><ol>
<li><p>下载Linux内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install linux-source-4.4.0</div></pre></td></tr></table></figure>
<p>下载完的内核放在<code>/usr/src/</code>里，等待解压。</p>
</li>
<li><p>解压内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /usr/src/</div><div class="line">sudo tar -xvf ./linux-source-4.4.0.tar.bz2</div></pre></td></tr></table></figure>
<p>解压完成之后增添系统调用</p>
</li>
<li><p>增添系统调用</p>
<p>编辑<code>arch/x86/entry/syscalls/syscall_64.tbl</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ./linux-source-4.4.0/</div><div class="line">sudo nano ./arch/x86/entry/syscalls/syscall_64.tbl</div></pre></td></tr></table></figure>
<p>我添加了546号系统调用sys_hello</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">546     64      hello                   sys_hello</div></pre></td></tr></table></figure>
</li>
<li><p>声明系统函数调用原型</p>
<p>编辑<code>include/linux/syscalls.h</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nano include/linux/syscalls.h</div></pre></td></tr></table></figure>
<p>添加系统调用函数原型</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
</li>
<li><p>添加系统调用函数的定义</p>
<p>编辑<code>kernel/sys.c</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nano kernel/sys.c</div></pre></td></tr></table></figure>
<p>添加系统调用函数的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</div><div class="line">	printk(<span class="string">"My student NO. is 71115115, and my name is 王子卓"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>编译内核</p>
<p>首先要安装编译所需工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install libncurses-dev libssl-dev</div></pre></td></tr></table></figure>
<p>安装完开始编译内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sudo make menuconfig</div><div class="line">sudo make bzImage //在bzImage之前加上 -j2 、 -j4等选项可以选择编译的线程数</div><div class="line">sudo make modules</div><div class="line">sudo make modules_install</div><div class="line">sudo make install //引导自动添加</div><div class="line">sudo update-grub //保险起见再次更新grub2</div><div class="line">sudo restart</div></pre></td></tr></table></figure>
<p>重启后进入新内核。</p>
</li>
<li><p>测试系统调用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//syscall.cpp</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/syscall.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">int</span> call = syscall(<span class="number">546</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"System call sys_hello returned %ld\n"</span>,call);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="四-主要数据结构及其说明"><a href="#四-主要数据结构及其说明" class="headerlink" title="四.主要数据结构及其说明"></a>四.主要数据结构及其说明</h2><ul>
<li>系统调用表<code>syscall_64.tbl</code>，记录着所有系统调用号。</li>
<li>系统调用头文件<code>syscalls.h</code>，记录着所有系统调用的函数原型。</li>
<li>系统调用定义文件<code>sys.c</code>，记录着所有系统调用的函数实现。</li>
</ul>
<h2 id="五-程序运行结果"><a href="#五-程序运行结果" class="headerlink" title="五.程序运行结果"></a>五.程序运行结果</h2><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/OSExperiment/Screenshot%20at%202017-03-14%2020:53:02.png?raw=true" alt="1"></p>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/OSExperiment/Screenshot%20at%202017-03-14%2020:54:47.png?raw=true" alt="2"></p>
<h2 id="六-实验体会"><a href="#六-实验体会" class="headerlink" title="六.实验体会"></a>六.实验体会</h2><ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">scripts/sign-file.c:23:30: fatal error: openssl/opensslv.h: No such file or directory</div><div class="line">compilation terminated.</div><div class="line">scripts/Makefile.host:91: recipe for target &apos;scripts/sign-file&apos; failed</div><div class="line">make[1]: *** [scripts/sign-file] Error 1</div><div class="line">make[1]: *** Waiting for unfinished jobs....</div><div class="line">  CC      arch/x86/purgatory/purgatory.o</div><div class="line">  AS      arch/x86/purgatory/stack.o</div><div class="line">  AS      arch/x86/purgatory/setup-x86_64.o</div><div class="line">  CC      arch/x86/purgatory/sha256.o</div><div class="line">Makefile:566: recipe for target &apos;scripts&apos; failed</div><div class="line">make: *** [scripts] Error 2</div><div class="line">make: *** Waiting for unfinished jobs....</div><div class="line">  AS      arch/x86/purgatory/entry64.o</div><div class="line">  CC      arch/x86/purgatory/string.o</div><div class="line">  LD      arch/x86/purgatory/purgatory.ro</div><div class="line">  BIN2C   arch/x86/purgatory/kexec-purgatory.c</div></pre></td></tr></table></figure>
<ul>
<li><p>这是因为缺少编译所需的<code>libssl-dev</code>库</p>
<p>解决方法：<code>sudo apt install libssl-dev</code></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">***</div><div class="line">*** Configuration file &quot;.config&quot; not found!</div><div class="line">***</div><div class="line">*** Please run some configurator (e.g. &quot;make oldconfig&quot; or</div><div class="line">*** &quot;make menuconfig&quot; or &quot;make xconfig&quot;).</div><div class="line">***</div></pre></td></tr></table></figure>
<p>这是在编译之前没有执行<code>sudo make menuconfig</code>生成<code>.config</code>文件。</p>
</li>
</ul>
<h2 id="七-源程序"><a href="#七-源程序" class="headerlink" title="七.源程序"></a>七.源程序</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">sudo nano ./arch/x86/entry/syscalls/syscall_64.tbl</div><div class="line"><span class="comment">//末尾添加</span></div><div class="line"><span class="number">546</span>     <span class="number">64</span>      hello                   sys_hello</div><div class="line"></div><div class="line">sudo nano include/linux/syscalls.h</div><div class="line"><span class="comment">//任意位置添加</span></div><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"></div><div class="line">sudo nano kernel/sys.c</div><div class="line"><span class="comment">//任意位置添加</span></div><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</div><div class="line">	printk(<span class="string">"My student NO. is 71115115, and my name is 王子卓"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//测试系统调用</span></div><div class="line"><span class="comment">//syscall.cpp</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/syscall.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">int</span> call = syscall(<span class="number">546</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"System call sys_hello returned %ld\n"</span>,call);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" itemprop="url">
                  最简单地安装PyQt5+Eric6+Sip+QScintilla2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-12T19:32:39+08:00" content="2017-01-12">
              2017-01-12
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" class="leancloud_visitors" data-flag-title="最简单地安装PyQt5+Eric6+Sip+QScintilla2">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="对编译安装说不"><a href="#对编译安装说不" class="headerlink" title="对编译安装说不"></a>对编译安装说不</h1><p>&emsp;&emsp;编译安装不利于后续升级，也有可能在编译过程中出现各种奇怪的问题，最主要还有对于低端机来说很慢。。。</p>
<h1 id="Ubuntu安装"><a href="#Ubuntu安装" class="headerlink" title="Ubuntu安装"></a>Ubuntu安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">sudo apt install python3.5 python3-pip //基础</div><div class="line">sudo pip3 install qscintilla //这一步会安装PyQt5、Sip、QScintilla2</div><div class="line">sudo apt install qt4-designer //Eric会用它来创建界面</div><div class="line">//到官网上下载Eric的压缩包，解压缩，cd到解压目录</div><div class="line">sudo python3 install.py //安装Eric6</div><div class="line">sudo python3 install-i18n.py //安装语言包</div><div class="line">sudo python3 install-debugclients.py //不知道是干嘛的，安装上没坏处</div><div class="line">sudo pip3 install pyenchant //Python检查拼写的插件，Eric会用上</div><div class="line"></div><div class="line">//之后就完成了，比我看到的任何教程都简单。。。</div><div class="line">//好好研究一下PyQt5吧</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/07/Java大作业说明文档/" itemprop="url">
                  Java大作业说明文档
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-07T19:49:49+08:00" content="2017-01-07">
              2017-01-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/07/Java大作业说明文档/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/07/Java大作业说明文档/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/07/Java大作业说明文档/" class="leancloud_visitors" data-flag-title="Java大作业说明文档">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/ZizhuoWang/JavaATM" target="_blank" rel="external">GitHub</a></p>
<h1 id="ATM机设计文档"><a href="#ATM机设计文档" class="headerlink" title="ATM机设计文档"></a><div align="middle"><font size="7">ATM机设计文档</font></div></h1><div align="middle"><font size="5">71115115 王子卓</font></div>

<hr>
<h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a><div align="middle">效果</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM1.png" alt=""><br><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM2.png" alt=""></p>
<p>&emsp;&emsp;服务器的守护进程启动之后可以显示在线人数和各个用户的账户总金额。<br>&emsp;&emsp;ATM机界面在没有登录的时候不可以点击存取款、查询等按钮，金额、编号文本框不可编辑。登陆之后，注册和登录按钮不可点击，用户名、密码文本框不可编辑。</p>
<hr>
<h1 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a><div align="middle">测试方法</div></h1><p>&emsp;&emsp;修改Server.java中getConnection函数中的dbURL，将&amp;user=root&amp;password=<code>******</code>修改成您的MySQL用户名和密码。</p>
<hr>
<h1 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a><div align="middle">程序结构</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/MYATM.png" alt=""></p>
<p>&emsp;&emsp;这不是一个标准的UML类图。<br>&emsp;&emsp;活期账户、半年期、一年期、五年期存款和贷款都实现了同一个Balance接口，Balance接口继承了Runnable类。活期账户、半年期、一年期、五年期存款和贷款都聚合到User类中。客户端Client和服务器Server都有User类的成员对象。<br>&emsp;&emsp;客户端Client和服务器守护进程ServerDaemon连接，由ServerDaemon动态创建Server线程。<br>&emsp;&emsp;每一笔存款自身都是线程，服务器打开之后，线程自动运行，实现加息。利息每季度结算，每季度利息是年利率开四次方。<br>&emsp;&emsp;客户端和服务器之间信息传递依靠对象输入输出流，信息载体是Command类对象和User类对象。<br>&emsp;&emsp;数据库的操作由Server类完成。<br>&emsp;&emsp;大部分对象都实现了可序列化Serializable接口，以便存入数据库。<br>&emsp;&emsp;采用了UTF-8编解码，所以<strong>支持中文</strong>。</p>
<hr>
<h1 id="数据库结构"><a href="#数据库结构" class="headerlink" title="数据库结构"></a><div align="middle">数据库结构</div></h1><ol>
<li>数据库名：atm</li>
<li>数据表名：user</li>
<li>数据表字段：<ul>
<li>name：varchar(200),非空，不可重复</li>
<li>object：longblob，非空</li>
</ul>
</li>
<li>字段作用：name负责存储用户的用户名。object负责存储用户类的对象，该对象中保存有包括用户密码在内的各种用户信息。</li>
<li>优点：在一定程度上减少数据库的读取、写入次数。用户的信息并不以明文方式呈现，在一定程度上有加密的作用。</li>
</ol>
<hr>
<h1 id="程序使用流程"><a href="#程序使用流程" class="headerlink" title="程序使用流程"></a><div align="middle">程序使用流程</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/17/AMD-New-Horizon/" itemprop="url">
                  AMD New Horizon
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-17T08:30:28+08:00" content="2016-12-17">
              2016-12-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/17/AMD-New-Horizon/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/17/AMD-New-Horizon/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/17/AMD-New-Horizon/" class="leancloud_visitors" data-flag-title="AMD New Horizon">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>AMD New Horizon:</p>
<embed type="video/mp4" allowscriptaccess="always" allowfullscreen="true" wmode="transparent" quality="high" height="300" width="480" src="https://youtu.be/fMr68XznYac"><br><br><a href="https://www.youtube.com/watch?v=fMr68XznYac" target="_blank" rel="external">打不开点这里</a><br><br><embed src="http://player.youku.com/player.php/sid/XMTg2NzE1NzU4NA==/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars0.githubusercontent.com/u/22298419?v=3&u=12cc559f5bea926634e500e76e8e3da9b699c959&s=400"
               alt="王子卓" />
          <p class="site-author-name" itemprop="name">王子卓</p>
          <p class="site-description motion-element" itemprop="description">理路上事，勿惮其难而稍为退步，一退步便远隔千山。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王子卓</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zizhuowang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("oNJjTL7jM33iRBxHld63N3z1-gzGzoHsz", "uqK0i0RTln8eoNQgV71yGxLy");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
