<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">
<meta property="og:type" content="website">
<meta property="og:title" content="为学日益，为道日损">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="为学日益，为道日损">
<meta property="og:description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="为学日益，为道日损">
<meta name="twitter:description" content="理路上事，勿惮其难而稍为退步，一退步便远隔千山。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>


  <title> 为学日益，为道日损 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">为学日益，为道日损</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">欲路上事，勿乐其便而姑为染指，一染指便深入万仞。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业三/" itemprop="url">
                  算法作业三
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:55:58+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业三/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业三/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业三/" class="leancloud_visitors" data-flag-title="算法作业三">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第三次作业"><a href="#第三次作业" class="headerlink" title="第三次作业"></a>第三次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="3-1"><a href="#3-1" class="headerlink" title="3-1"></a>3-1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZuiChangDanDiaoDiZengZiXuLie</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[] ZCDDZDZXL(<span class="keyword">int</span>[] a)&#123;</div><div class="line">		<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>,k=<span class="number">0</span>,n=a.length;</div><div class="line">		<span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[n]; </div><div class="line">		<span class="comment">//b数组的各个元素负责存储以a数组中序号对应的各个元素为结尾的最长单调子序列长度</span></div><div class="line">		b[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(;i&lt;n;i++)&#123;</div><div class="line">			<span class="keyword">for</span>(;j&lt;i;j++)&#123; </div><div class="line">				<span class="keyword">if</span>(a[j]&lt;=a[i]&amp;&amp;k&lt;b[j])</div><div class="line">					k=b[j];</div><div class="line">			&#125;</div><div class="line">			b[i] = k+<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> maxLength(n, b);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[] maxLength(<span class="keyword">int</span> n,<span class="keyword">int</span>[] b)&#123;</div><div class="line">		<span class="keyword">int</span> temp=<span class="number">0</span>,i=<span class="number">0</span>,flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(;i&lt;n;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(b[i]&gt;temp)&#123;</div><div class="line">				temp=b[i];</div><div class="line">				flag = i;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span>[] msg = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">		msg[<span class="number">0</span>] = flag;</div><div class="line">		msg[<span class="number">1</span>] = temp;</div><div class="line">		<span class="keyword">return</span> msg;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ZuiChangDanDiaoDiZengZiXuLie xuLie = <span class="keyword">new</span> ZuiChangDanDiaoDiZengZiXuLie();</div><div class="line">		<span class="keyword">int</span>[] a = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</div><div class="line">		<span class="keyword">int</span>[] length = xuLie.ZCDDZDZXL(a);</div><div class="line">		System.out.println(<span class="string">"子序列末尾元素角标"</span>+length[<span class="number">0</span>]+<span class="string">"\n最长单调递增子序列长度"</span>+length[<span class="number">1</span>]);</div><div class="line">		<span class="keyword">int</span> biggest=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</div><div class="line">				System.out.println(a[i]);</div><div class="line">				biggest = a[i];</div><div class="line">			&#125;<span class="keyword">else</span></div><div class="line">				<span class="keyword">if</span>(a[i]&gt;=biggest)&#123;</div><div class="line">					System.out.println(a[i]);</div><div class="line">					biggest = a[i];</div><div class="line">				&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/Algorithm/ZCDDDZZXL.png?raw=true" alt=""></p>
<h3 id="3-2"><a href="#3-2" class="headerlink" title="3-2"></a>3-2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdvancedZCDDDZZXL</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LIS</span><span class="params">(<span class="keyword">int</span>[] a)</span></span>&#123;</div><div class="line">		<span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[a.length];</div><div class="line">		b[<span class="number">1</span>] = a[<span class="number">0</span>];</div><div class="line">		<span class="keyword">int</span> k = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a.length;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(a[i]&gt;=b[k])&#123;</div><div class="line">				b[++k] = a[i];</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				b[binary(i, k, a, b)] = a[i];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> k;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">binary</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> k,<span class="keyword">int</span>[] a,<span class="keyword">int</span>[] b)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(a[i]&lt;b[<span class="number">1</span>])</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> j=k;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> h=<span class="number">1</span>;h!=j-<span class="number">1</span>;)&#123;</div><div class="line">			<span class="keyword">if</span>(b[k=(h+j)/<span class="number">2</span>]&lt;=a[i])</div><div class="line">				h=k;</div><div class="line">			<span class="keyword">else</span></div><div class="line">				j=k;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> j;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-4"><a href="#3-4" class="headerlink" title="3-4"></a>3-4</h3><ul>
<li><p>该问题是二维0-1背包问题。</p>
</li>
<li><p>对于给定的$$c&gt;0,d&gt;0,\omega_i&gt;0,b_i&gt;0,v_i&gt;0, 1\le{i}\le{n}$$</p>
</li>
<li><p>要求找出<em>n</em>元0-1向量$$(x_1,x_2,…,x_n),x<em>i\in{0,1},1\le{i}\le{n}$$使得$$\sum</em>{i=1}^{n}\omega_ix<em>i\le{c}, \sum</em>{i=1}^nb_ix<em>i\le{d}$$而且使$$\sum</em>{i=1}^nv_ix_i$$达到最大值。</p>
</li>
<li><p>由此可知，二维0-1背包问题是整数规划问题。<br>$$<br>max\sum_{i=1}^{n}v_ix<em>i\<br>\left{<br>\begin{array}\<br>\sum</em>{i=1}^{n}\omega_ix<em>i\le{c}\<br>\sum</em>{i=1}^{n}b_ix_i\le{d}\<br>x_i\in{0,1},1\le{i}\le{n}<br>\end{array}<br>\right.<br>$$</p>
</li>
</ul>
<ul>
<li>该问题具有最优子结构性质。设该问题的子问题<br>$$<br>max\sum_{t=i}^{n}v_tx<em>t\<br>\left{<br>\begin{array}\<br>\sum</em>{t=i}^{n}\omega_tx<em>t\le{j}\<br>\sum</em>{t=i}^{n}b_tx_t\le{k}\<br>x_i\in{0,1},i\le{t}\le{n}<br>\end{array}<br>\right.<br>$$</li>
</ul>
<p>  的最优解为$$m(i,j,k)$$，背包容量为<em>j</em>，容积为<em>k</em>，可选择的物品为$$i,i+1,…,n$$时该问题的最优值。</p>
<ul>
<li>由二维0-1背包问题的最优子结构性质，可得：<br>$$<br>m(i,j,k)=\left{<br>\begin{array}\<br>max{m(i+1,j),m(i+1,j-\omega_i,k-b_i)+v_i}\ \ \ \ j\ge\omega_i且k\ge{b_i}\<br>m(i+1,j)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0\le{j}\le{\omega_i}或0\le{k}\le{b_i}<br>\end{array}<br>\right.<br>$$</li>
</ul>
<p>$$<br>m(n,j,k) =<br>\left{<br>\begin{array}\<br>v_n \ \ \ \ \ j\ge{\omega_n}且k\ge{b_n}\<br>0 \ \ \ \ \ \ \ 0\le{j}&lt;{\omega_n}或0\le{k}&lt;b_n<br>\end{array}<br>\right.<br>$$</p>
<ul>
<li>由上式可知$$m(n,c,d)$$为最优值。算法所需的计算时间为$$O(ncd)$$。</li>
</ul>
<h3 id="4-1"><a href="#4-1" class="headerlink" title="4-1"></a>4-1</h3><ul>
<li>设变量$$x_i=1$$表示将$$l_i$$存放在$$T_1$$上，并且$$T_1$$的检索时间短于$$T<em>2$$<br>$$<br>\sum</em>{i=1}^{n}l_ix<em>i\le\sum</em>{i=1}^{n}l_i(1-x<em>i)\<br>\sum</em>{i=1}^{n}l_ix<em>i\le\frac{1}{2}\sum</em>{i=1}^{n}l_i<br>$$</li>
</ul>
<p>$$T<em>1$$的检索时间应取最大值，即<br>$$<br>max\sum</em>{i=1}^{n}l_ix<em>i\<br>使得\sum</em>{i=1}^{n}l_ix<em>i\le\frac{1}{2}\sum</em>{i=1}^{n}l_i<br>$$</p>
<h3 id="最小生成树算法的正确性"><a href="#最小生成树算法的正确性" class="headerlink" title="最小生成树算法的正确性"></a>最小生成树算法的正确性</h3><h4 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h4><p>  Prim算法的思路是，从任意一个顶点开始，把这个顶点作为最初的最小生成树的子树，通过逐步地为当前的子树添加新边来生成最终的最小生成树，添加的策略是，每次只添加从外部连接到该子树的所有边中的最短边。</p>
<p>  对于任意一个顶点vi，连接到该顶点的所有边中的一条最短边$$(v_i,v_j)$$必然属于最小生成树。</p>
<p>  假设最小生成树已经建成，$$(v_i,v_j)$$是连接到顶点vi的最短边，在最小生成树中取出vi，断开连接到vi的边，则生成树被拆分成</p>
<ol>
<li>顶点$$v_i$$</li>
<li>顶点$$v_j$$所在的连通分量（单独一个顶点也看作一个独立的连通分量）</li>
<li>其余若干个连通分量（个数大于等于0）</li>
</ol>
<p>  三个部分</p>
<p>  现在要重建生成树，就要重新连接之前被断开的各边。</p>
<p>  虽然不知道之前被断开的都是哪几条边，但是可以通过这样一个简单的策略来重建连接：将$$v_i$$分别以最小的成本逐个连接到这若干个互相分离的连通分量。具体来说，就是要分别遍历顶点$$v_i$$到某个连通分量中的所有顶点的连接，然后选择其中最短的边来连接$$v_i$$和该连通分量；而要将$$v_i$$连接到$$v_j$$所在的连通分量，显然通过边$$(v_i,v_j)$$连接的成本最低，所以边$$(v_i,v_j)$$必然属于最小生成树（如果连接到$$v_i$$的最短边不止一条，只要任意挑选其中的一条$$(v_i,v_j)$$即可，以上的证明对于这种情况同样适用）。这样我们就为原来只有一个顶点$$v_i$$的子树添加了一个新的顶点vj及新边$$(v_i,v_j)$$。接下来只要将这棵新子树作为一个连通子图，并且用这个连通子图替换顶点$$v_i$$重复以上的分析，迭代地为子树逐个地添加新顶点和新边即可。</p>
<h4 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h4><p>  Kruskal算法通过从小到大遍历边集，每次尝试为最小生成树加入当前最短的边，加入成功的条件是该边不会在当前已构建的图中造成回路，当加入的边的数目达到n-1，遍历结束。</p>
<p>  Kruskal算法每次为当前的图添加一条不会造成回路的新边，其本质是逐步地连接当前彼此分散的各个连通分量（单个顶点也算作一个连通分量），而连接的策略是每次只用最小的成本连接任意两个连通分量。这个策略之所以能够实现，是因为每加入一条边之后只会出现两种结果：</p>
<ol>
<li>在已有的连通分量中形成回路</li>
<li>连接两个彼此独立的连通分量</li>
</ol>
<p>  所以，通过从小到大遍历边集，判断是否会造成回路，然后逐条添加新边就可以实现上诉的连接策略。</p>
<p>  如果某个连通图属于最小生成树，那么所有从外部连接到该连通图的边中的一条最短的边必然属于最小生成树当最小生成树被拆分成彼此独立的若干个连通分量的时候，因为该边必然是这两个连通分量的可以连接到外部的最短边，所以所有能够连接任意两个连通分量的边中的一条最短边必然属于最小生成树。</p>
<p>  由此也就证明了，Kruskal算法通过每次以最小的成本来连接两个连通分量的策略确实可以正确地生成最小生成树。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业二/" itemprop="url">
                  算法作业二
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:55:02+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业二/" class="leancloud_visitors" data-flag-title="算法作业二">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第二次作业"><a href="#第二次作业" class="headerlink" title="第二次作业"></a>第二次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="2-2"><a href="#2-2" class="headerlink" title="2-2"></a>2-2</h3><h4 id="1-left和right游标的调整不正确，应改为："><a href="#1-left和right游标的调整不正确，应改为：" class="headerlink" title="(1)left和right游标的调整不正确，应改为："></a>(1)left和right游标的调整不正确，应改为：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(x&gt;a[middle]) left = middle+<span class="number">1</span>;</div><div class="line"><span class="keyword">else</span> right = middle<span class="number">-1</span>;</div></pre></td></tr></table></figure>
<h4 id="2-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。"><a href="#2-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。" class="headerlink" title="(2)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。"></a>(2)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。</h4><h4 id="3-同上，查找元素为x-a-n-1-时错误。"><a href="#3-同上，查找元素为x-a-n-1-时错误。" class="headerlink" title="(3)同上，查找元素为x=a[n-1]时错误。"></a>(3)同上，查找元素为x=a[n-1]时错误。</h4><h4 id="4-left和right游标的调整不正确，查找大于中值的数时可能进入死循环。"><a href="#4-left和right游标的调整不正确，查找大于中值的数时可能进入死循环。" class="headerlink" title="(4)left和right游标的调整不正确，查找大于中值的数时可能进入死循环。"></a>(4)left和right游标的调整不正确，查找大于中值的数时可能进入死循环。</h4><h4 id="5-没什么问题"><a href="#5-没什么问题" class="headerlink" title="(5)没什么问题"></a>(5)没什么问题</h4><h4 id="6-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。"><a href="#6-left和right游标的调整不正确，查找元素为x-a-n-1-时错误。" class="headerlink" title="(6)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。"></a>(6)left和right游标的调整不正确，查找元素为x=a[n-1]时错误。</h4><h4 id="7-left和right游标的调整不正确，查找元素为x-a-0-时错误。"><a href="#7-left和right游标的调整不正确，查找元素为x-a-0-时错误。" class="headerlink" title="(7)left和right游标的调整不正确，查找元素为x=a[0]时错误。"></a>(7)left和right游标的调整不正确，查找元素为x=a[0]时错误。</h4><h3 id="2-3"><a href="#2-3" class="headerlink" title="2-3"></a>2-3</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(T a[], <span class="keyword">const</span> T &amp;x, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> &amp;i, <span class="keyword">int</span> j)</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">int</span> middle;</div><div class="line">  	<span class="keyword">while</span>(left&lt;=right)&#123;</div><div class="line">      middle = (left+right)/<span class="number">2</span>;</div><div class="line">      <span class="keyword">if</span>(x==a[middle])&#123;</div><div class="line">        i=middle;j=middle;<span class="keyword">return</span> middle;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span>(x&gt;a[middle]) left = middle+<span class="number">1</span>;</div><div class="line">      <span class="keyword">else</span> right = middle<span class="number">-1</span>;</div><div class="line">  	&#125;</div><div class="line">  	i=right;j=left;<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="2-4"><a href="#2-4" class="headerlink" title="2-4"></a>2-4</h3><p>当m远小于n时，可以将大整数v分成n/m个长度为m的小段。计算u*v需要计算n/m次m位乘法，每一次m位乘法采用分治法计算，需要$$O(m^{log_23})$$时间。总时间为$$O(\frac{n}{m}<em>m^{log_23})=O(n</em>m^{log_2{\frac{3}{2}}})$$</p>
<h3 id="算法实现2-6"><a href="#算法实现2-6" class="headerlink" title="算法实现2-6"></a>算法实现2-6</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Zidianxu</span> </span>&#123;</div><div class="line">	String input = <span class="string">"/home/wang/input.txt"</span>;</div><div class="line">	String output = <span class="string">"/home/wang/output.txt"</span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String string)</span></span>&#123; </div><div class="line">		<span class="comment">//作用就是将传入的字符串写入指定的文件</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileOutputStream fileOutputStream = </div><div class="line">					<span class="keyword">new</span> FileOutputStream(output,<span class="keyword">false</span>);<span class="comment">//覆写模式</span></div><div class="line">			OutputStreamWriter outputStreamWriter = </div><div class="line">					<span class="keyword">new</span> OutputStreamWriter(fileOutputStream,<span class="string">"UTF-8"</span>);</div><div class="line">			BufferedWriter bufferedWriter =</div><div class="line">					<span class="keyword">new</span> BufferedWriter(outputStreamWriter);</div><div class="line">			bufferedWriter.write(string);</div><div class="line">			bufferedWriter.flush();</div><div class="line">			bufferedWriter.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">jieCheng</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</div><div class="line">		<span class="comment">//求阶乘</span></div><div class="line">		<span class="keyword">int</span> result=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=i;j++)&#123;</div><div class="line">			result*=j;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">char</span>[] next(<span class="keyword">char</span>[] s)&#123;</div><div class="line">		<span class="comment">//求下一个排列</span></div><div class="line">		<span class="keyword">char</span>[] result=s;</div><div class="line">		<span class="keyword">int</span> last = s.length-<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=last-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</div><div class="line">			<span class="keyword">if</span>(s[i]&lt;s[last])&#123;</div><div class="line">				<span class="comment">//最右边的数，从右往左，遇到第一个比它小的数时，</span></div><div class="line">				<span class="comment">//排列到这个数的前面，这个数以后依次后移一位。</span></div><div class="line">				<span class="keyword">char</span> temp = s[last];</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j=last-<span class="number">1</span>;j&gt;=i;j--)&#123;</div><div class="line">					result[j+<span class="number">1</span>] = result[j];</div><div class="line">				&#125;</div><div class="line">				result[i] = temp;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file = <span class="keyword">new</span> File(input);</div><div class="line">			BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file));</div><div class="line">			String string = <span class="keyword">null</span>,out = <span class="string">""</span>;</div><div class="line">			</div><div class="line">			<span class="keyword">int</span> i=<span class="number">0</span>,nums=<span class="number">0</span>,value=<span class="number">0</span>,current=<span class="number">0</span>,nums2=<span class="number">0</span>;</div><div class="line">			<span class="comment">//i是行数计数，nums是排列的长度，value是字典序值</span></div><div class="line">			<span class="comment">//current是当前指向的数字，nums2只是复制一下nums</span></div><div class="line">			<span class="keyword">while</span>((string = reader.readLine()) != <span class="keyword">null</span>)&#123;</div><div class="line">				<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</div><div class="line">					nums = Integer.parseInt(string);</div><div class="line">					nums2=nums;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">else</span>&#123;</div><div class="line">					<span class="comment">//以26458173为例，选定一个数</span></div><div class="line">					<span class="comment">//看后面有几个比当前数小的，比如2后面比2小的只有1个，</span></div><div class="line">					<span class="comment">//6后面比6小的有4个，4后面比4小的有2个</span></div><div class="line">					<span class="comment">//8227=1*7!+4*6!+2*5!+...</span></div><div class="line">					<span class="keyword">char</span>[] array = string.toCharArray();</div><div class="line">					<span class="keyword">for</span>(;current&lt;nums-<span class="number">1</span>;current++)&#123;</div><div class="line">						<span class="comment">//从零下标开始依次往后扫描</span></div><div class="line">						<span class="comment">//counter用来数比这个数小的有几个数</span></div><div class="line">						<span class="keyword">int</span> scan = current+<span class="number">1</span>,counter=<span class="number">0</span>;</div><div class="line">						<span class="keyword">for</span>(;scan&lt;nums;scan++)&#123;</div><div class="line">							<span class="keyword">if</span>(array[current]&gt;array[scan])&#123;</div><div class="line">								counter++;</div><div class="line">							&#125;</div><div class="line">						&#125;</div><div class="line">						value+=counter*jieCheng(nums2-<span class="number">1</span>-current);</div><div class="line">					&#125;</div><div class="line">					out+=value+<span class="string">"\n"</span>;</div><div class="line">					<span class="keyword">char</span>[] result = next(array);</div><div class="line">					String result2 = String.valueOf(result);</div><div class="line">					out+=result2;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">			write(out);<span class="comment">//写出</span></div><div class="line">			reader.close();<span class="comment">//关闭BufferedReader</span></div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;		</div><div class="line">		Zidianxu zidianxu = <span class="keyword">new</span> Zidianxu();</div><div class="line">		zidianxu.read();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/算法作业一/" itemprop="url">
                  算法作业一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T23:53:54+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/算法作业一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/26/算法作业一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/26/算法作业一/" class="leancloud_visitors" data-flag-title="算法作业一">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第一次作业"><a href="#第一次作业" class="headerlink" title="第一次作业"></a>第一次作业</h1><h2 id="71115115-王子卓"><a href="#71115115-王子卓" class="headerlink" title="71115115 王子卓"></a>71115115 王子卓</h2><h3 id="1-1-求下列函数的渐进表达式"><a href="#1-1-求下列函数的渐进表达式" class="headerlink" title="1-1 求下列函数的渐进表达式"></a>1-1 求下列函数的渐进表达式</h3><p>$$<br>3n^2 + 10n = O(n^2)<br>$$</p>
<p>$$<br>\frac{n^2}{10} + 2^n = O(2^n)<br>$$</p>
<p>$$<br>21 + \frac{1}{n} = O(1)<br>$$</p>
<p>$$<br>log(n^3) = O(logn)<br>$$</p>
<p>$$<br>10log3^n = O(n)<br>$$</p>
<h3 id="1-4"><a href="#1-4" class="headerlink" title="1-4"></a>1-4</h3><h4 id="1"><a href="#1" class="headerlink" title="(1)"></a>(1)</h4><p>设在这台新机器上用同一算法在 <em>t</em> 秒内能解规模为$$n_1$$的问题<br>$$<br>3<em>2^n</em>64 = 3*2^{n_1}<br>$$</p>
<p>$$<br>n_1 = n + 6<br>$$</p>
<h4 id="2"><a href="#2" class="headerlink" title="(2)"></a>(2)</h4><p>设在这台新机器上用同一算法在 <em>t</em> 秒内能解规模为$$n_2$$的问题<br>$$<br>n^2*64 = n_2^2<br>$$</p>
<p>$$<br>n_2 = 8*n<br>$$</p>
<h4 id="3"><a href="#3" class="headerlink" title="(3)"></a>(3)</h4><p><em>T(n) = 8</em>与<em>n</em>无关，所以可以解输入规模任意大的问题。</p>
<h3 id="1-6"><a href="#1-6" class="headerlink" title="1-6"></a>1-6</h3><h4 id="1-1"><a href="#1-1" class="headerlink" title="(1)"></a>(1)</h4><p>$$<br>f(n) = logn^2 = 2*logn<br>$$</p>
<p>$$<br>g(n) = logn+5<br>$$</p>
<p><em>f(n)</em>与<em>g(n)</em>同阶，因此<br>$$<br>f(n) = \theta(g(n))<br>$$</p>
<h4 id="2-1"><a href="#2-1" class="headerlink" title="(2)"></a>(2)</h4><p>$$<br>f(n) = logn^2 = 2*logn<br>$$</p>
<p>$$<br>g(n) = \sqrt[2]{n} = n^{\frac{1}{2}}<br>$$</p>
<p>$$log_2n$$的反函数为$$2^n$$，而$$\sqrt[2]{n}$$的反函数为$$n^2$$，$$2^n$$的增长速度远高于$$n^2$$，因此$$log_2n$$的增长速度远小于$$\sqrt[2]{n}$$.因此<em>f(n)</em>的阶不高于<em>g(n)</em>的阶，也就是<br>$$<br>f(n) = O(g(n))<br>$$</p>
<h4 id="3-1"><a href="#3-1" class="headerlink" title="(3)"></a>(3)</h4><p>$$<br>f(n) = n<br>$$</p>
<p>$$<br>g(n) = log^2n<br>$$</p>
<p>$$<br>O(1)&lt;O(log_2n)&lt;O(n)&lt;O(log_2^2n)&lt;O(nlog_2n)<br>$$</p>
<p>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="4"><a href="#4" class="headerlink" title="(4)"></a>(4)</h4><p>$$<br>f(n) = nlog_2n + n = O(nlog_2n)<br>$$</p>
<p>$$<br>g(n) = log_2n = O(log_2n)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="5"><a href="#5" class="headerlink" title="(5)"></a>(5)</h4><p>$$<br>f(n) = 10 = O(1)<br>$$</p>
<p>$$<br>g(n) = log10 = O(1)<br>$$</p>
<p><em>f(n)</em>与<em>g(n)</em>同阶，因此<br>$$<br>f(n) = \theta(g(n))<br>$$</p>
<h4 id="6"><a href="#6" class="headerlink" title="(6)"></a>(6)</h4><p>$$<br>f(n) = O(log^2n)<br>$$</p>
<p>$$<br>g(n) = O(logn)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="7"><a href="#7" class="headerlink" title="(7)"></a>(7)</h4><p>$$<br>f(n) = 2^n = O(2^n)<br>$$</p>
<p>$$<br>g(n) = 100n^2 = O(n^2)<br>$$</p>
<p><em>f(n)</em>的阶不低于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = \Omega(g(n))<br>$$</p>
<h4 id="8"><a href="#8" class="headerlink" title="(8)"></a>(8)</h4><p>$$<br>f(n) = O(2^n)<br>$$</p>
<p>$$<br>g(n) = O(3^n)<br>$$</p>
<p><em>f(n)</em>的阶不高于<em>g(n)</em>的阶，因此<br>$$<br>f(n) = O(g(n))<br>$$</p>
<h3 id="算法实现1-2"><a href="#算法实现1-2" class="headerlink" title="算法实现1-2"></a>算法实现1-2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> first;</div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZiDianXuShengXu</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> lines=<span class="number">0</span>,count=<span class="number">0</span>;</div><div class="line">	String input = <span class="string">"/home/wang/dict.txt"</span>;</div><div class="line">	String output = <span class="string">"/home/wang/dict2.txt"</span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String string)</span></span>&#123; <span class="comment">//作用就是将传入的字符串写入指定的文件</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(output,<span class="keyword">false</span>);<span class="comment">//覆写模式</span></div><div class="line">			OutputStreamWriter outputStreamWriter = <span class="keyword">new</span> OutputStreamWriter(fileOutputStream,<span class="string">"UTF-8"</span>);</div><div class="line">			BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(outputStreamWriter);</div><div class="line">			bufferedWriter.write(string);</div><div class="line">			bufferedWriter.flush();</div><div class="line">			bufferedWriter.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file = <span class="keyword">new</span> File(input);</div><div class="line">			BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file));</div><div class="line">			String string = <span class="keyword">null</span>,out = <span class="string">""</span>;</div><div class="line">			</div><div class="line">			<span class="keyword">int</span> i=<span class="number">0</span>,lines=<span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span>((string = reader.readLine()) != <span class="keyword">null</span>)&#123;</div><div class="line">				<span class="keyword">if</span>(i==<span class="number">0</span>)</div><div class="line">					lines = Integer.parseInt(string); <span class="comment">//我想了想，好像不需要，所以就没用</span></div><div class="line">				<span class="keyword">else</span>&#123;</div><div class="line">					<span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">					<span class="keyword">char</span> temp = string.charAt(string.length()-<span class="number">1</span>);<span class="comment">//取出字符串最后一位</span></div><div class="line">					sum = temp - <span class="number">96</span> - string.length() + <span class="number">1</span>;<span class="comment">//先把最后一位加上</span></div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;string.length()-<span class="number">1</span>;j++)&#123;<span class="comment">//分别计算每一位</span></div><div class="line">						temp = string.charAt(j);</div><div class="line">						sum += (temp-<span class="number">96</span>-j)*(<span class="number">26</span>-j);<span class="comment">//每一位进制不同</span></div><div class="line">					&#125;</div><div class="line">					out+=sum+<span class="string">"\n"</span>;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">			write(out);<span class="comment">//写出所有的编码</span></div><div class="line">			reader.close();<span class="comment">//关闭BufferedReader</span></div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ZiDianXuShengXu ziDianXuShengXu = <span class="keyword">new</span> ZiDianXuShengXu();</div><div class="line">		ziDianXuShengXu.read();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/15/操作系统实验一/" itemprop="url">
                  操作系统实验一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-15T08:13:27+08:00" content="2017-03-15">
              2017-03-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/15/操作系统实验一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/15/操作系统实验一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/03/15/操作系统实验一/" class="leancloud_visitors" data-flag-title="操作系统实验一">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="向Linux内核增加一个系统调用"><a href="#向Linux内核增加一个系统调用" class="headerlink" title="向Linux内核增加一个系统调用"></a>向Linux内核增加一个系统调用</h1><h2 id="71115115-王子卓-2017年3月14日"><a href="#71115115-王子卓-2017年3月14日" class="headerlink" title="71115115 王子卓 2017年3月14日"></a>71115115 王子卓 2017年3月14日</h2><h2 id="一-实验目的"><a href="#一-实验目的" class="headerlink" title="一.实验目的"></a>一.实验目的</h2><p>  通过实验，熟悉Linux操作系统的使用，掌握构建与启动Linux内核的方法；掌握用户程序如何利用系统调用与操作系统内核实现通信的方法，加深对系统调用机制的理解；进一步掌握如何向操作系统内核增加新的系统调用的方法，以扩展操作系统的功能。 </p>
<h2 id="二-实验内容"><a href="#二-实验内容" class="headerlink" title="二.实验内容"></a>二.实验内容</h2><ol>
<li>Linux环境下的C或C++编译和调试工具的使用。</li>
<li>向Linux内核增加新的系统调用，系统调用名称和功能自行定义，但必须实现如下输出功能：“My Student No. is 71115115，and My Name is 王子卓”。</li>
<li>Linux新内核的编译、安装和配置。</li>
<li>编写应用程序以测试新的系统调用并输出测试结果。</li>
</ol>
<h2 id="三-实验步骤"><a href="#三-实验步骤" class="headerlink" title="三.实验步骤"></a>三.实验步骤</h2><ol>
<li><p>下载Linux内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install linux-source-4.4.0</div></pre></td></tr></table></figure>
<p>下载完的内核放在<code>/usr/src/</code>里，等待解压。</p>
</li>
<li><p>解压内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /usr/src/</div><div class="line">sudo tar -xvf ./linux-source-4.4.0.tar.bz2</div></pre></td></tr></table></figure>
<p>解压完成之后增添系统调用</p>
</li>
<li><p>增添系统调用</p>
<p>编辑<code>arch/x86/entry/syscalls/syscall_64.tbl</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ./linux-source-4.4.0/</div><div class="line">sudo nano ./arch/x86/entry/syscalls/syscall_64.tbl</div></pre></td></tr></table></figure>
<p>我添加了546号系统调用sys_hello</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">546     64      hello                   sys_hello</div></pre></td></tr></table></figure>
</li>
<li><p>声明系统函数调用原型</p>
<p>编辑<code>include/linux/syscalls.h</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nano include/linux/syscalls.h</div></pre></td></tr></table></figure>
<p>添加系统调用函数原型</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div></pre></td></tr></table></figure>
</li>
<li><p>添加系统调用函数的定义</p>
<p>编辑<code>kernel/sys.c</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nano kernel/sys.c</div></pre></td></tr></table></figure>
<p>添加系统调用函数的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</div><div class="line">	printk(<span class="string">"My student NO. is 71115115, and my name is 王子卓"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>编译内核</p>
<p>首先要安装编译所需工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install libncurses-dev libssl-dev</div></pre></td></tr></table></figure>
<p>安装完开始编译内核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sudo make menuconfig</div><div class="line">sudo make bzImage //在bzImage之前加上 -j2 、 -j4等选项可以选择编译的线程数</div><div class="line">sudo make modules</div><div class="line">sudo make modules_install</div><div class="line">sudo make install //引导自动添加</div><div class="line">sudo update-grub //保险起见再次更新grub2</div><div class="line">sudo restart</div></pre></td></tr></table></figure>
<p>重启后进入新内核。</p>
</li>
<li><p>测试系统调用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//syscall.cpp</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/syscall.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">int</span> call = syscall(<span class="number">546</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"System call sys_hello returned %ld\n"</span>,call);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="四-主要数据结构及其说明"><a href="#四-主要数据结构及其说明" class="headerlink" title="四.主要数据结构及其说明"></a>四.主要数据结构及其说明</h2><ul>
<li>系统调用表<code>syscall_64.tbl</code>，记录着所有系统调用号。</li>
<li>系统调用头文件<code>syscalls.h</code>，记录着所有系统调用的函数原型。</li>
<li>系统调用定义文件<code>sys.c</code>，记录着所有系统调用的函数实现。</li>
</ul>
<h2 id="五-程序运行结果"><a href="#五-程序运行结果" class="headerlink" title="五.程序运行结果"></a>五.程序运行结果</h2><p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/OSExperiment/Screenshot%20at%202017-03-14%2020:53:02.png?raw=true" alt="1"></p>
<p><img src="https://github.com/ZizhuoWang/ImageBed/blob/master/OSExperiment/Screenshot%20at%202017-03-14%2020:54:47.png?raw=true" alt="2"></p>
<h2 id="六-实验体会"><a href="#六-实验体会" class="headerlink" title="六.实验体会"></a>六.实验体会</h2><ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">scripts/sign-file.c:23:30: fatal error: openssl/opensslv.h: No such file or directory</div><div class="line">compilation terminated.</div><div class="line">scripts/Makefile.host:91: recipe for target &apos;scripts/sign-file&apos; failed</div><div class="line">make[1]: *** [scripts/sign-file] Error 1</div><div class="line">make[1]: *** Waiting for unfinished jobs....</div><div class="line">  CC      arch/x86/purgatory/purgatory.o</div><div class="line">  AS      arch/x86/purgatory/stack.o</div><div class="line">  AS      arch/x86/purgatory/setup-x86_64.o</div><div class="line">  CC      arch/x86/purgatory/sha256.o</div><div class="line">Makefile:566: recipe for target &apos;scripts&apos; failed</div><div class="line">make: *** [scripts] Error 2</div><div class="line">make: *** Waiting for unfinished jobs....</div><div class="line">  AS      arch/x86/purgatory/entry64.o</div><div class="line">  CC      arch/x86/purgatory/string.o</div><div class="line">  LD      arch/x86/purgatory/purgatory.ro</div><div class="line">  BIN2C   arch/x86/purgatory/kexec-purgatory.c</div></pre></td></tr></table></figure>
<ul>
<li><p>这是因为缺少编译所需的<code>libssl-dev</code>库</p>
<p>解决方法：<code>sudo apt install libssl-dev</code></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">***</div><div class="line">*** Configuration file &quot;.config&quot; not found!</div><div class="line">***</div><div class="line">*** Please run some configurator (e.g. &quot;make oldconfig&quot; or</div><div class="line">*** &quot;make menuconfig&quot; or &quot;make xconfig&quot;).</div><div class="line">***</div></pre></td></tr></table></figure>
<p>这是在编译之前没有执行<code>sudo make menuconfig</code>生成<code>.config</code>文件。</p>
</li>
</ul>
<h2 id="七-源程序"><a href="#七-源程序" class="headerlink" title="七.源程序"></a>七.源程序</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">sudo nano ./arch/x86/entry/syscalls/syscall_64.tbl</div><div class="line"><span class="comment">//末尾添加</span></div><div class="line"><span class="number">546</span>     <span class="number">64</span>      hello                   sys_hello</div><div class="line"></div><div class="line">sudo nano include/linux/syscalls.h</div><div class="line"><span class="comment">//任意位置添加</span></div><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"></div><div class="line">sudo nano kernel/sys.c</div><div class="line"><span class="comment">//任意位置添加</span></div><div class="line"><span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</div><div class="line">	printk(<span class="string">"My student NO. is 71115115, and my name is 王子卓"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//测试系统调用</span></div><div class="line"><span class="comment">//syscall.cpp</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/syscall.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">int</span> call = syscall(<span class="number">546</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"System call sys_hello returned %ld\n"</span>,call);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" itemprop="url">
                  最简单地安装PyQt5+Eric6+Sip+QScintilla2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-12T19:32:39+08:00" content="2017-01-12">
              2017-01-12
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/12/最简单地安装PyQt5-Eric6-Sip-QScintilla2/" class="leancloud_visitors" data-flag-title="最简单地安装PyQt5+Eric6+Sip+QScintilla2">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="对编译安装说不"><a href="#对编译安装说不" class="headerlink" title="对编译安装说不"></a>对编译安装说不</h1><p>&emsp;&emsp;编译安装不利于后续升级，也有可能在编译过程中出现各种奇怪的问题，最主要还有对于低端机来说很慢。。。</p>
<h1 id="Ubuntu安装"><a href="#Ubuntu安装" class="headerlink" title="Ubuntu安装"></a>Ubuntu安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">sudo apt install python3.5 python3-pip //基础</div><div class="line">sudo pip3 install qscintilla //这一步会安装PyQt5、Sip、QScintilla2</div><div class="line">sudo apt install qt4-designer //Eric会用它来创建界面</div><div class="line">//到官网上下载Eric的压缩包，解压缩，cd到解压目录</div><div class="line">sudo python3 install.py //安装Eric6</div><div class="line">sudo python3 install-i18n.py //安装语言包</div><div class="line">sudo python3 install-debugclients.py //不知道是干嘛的，安装上没坏处</div><div class="line">sudo pip3 install pyenchant //Python检查拼写的插件，Eric会用上</div><div class="line"></div><div class="line">//之后就完成了，比我看到的任何教程都简单。。。</div><div class="line">//好好研究一下PyQt5吧</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/07/Java大作业说明文档/" itemprop="url">
                  Java大作业说明文档
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-07T19:49:49+08:00" content="2017-01-07">
              2017-01-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/07/Java大作业说明文档/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/07/Java大作业说明文档/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/07/Java大作业说明文档/" class="leancloud_visitors" data-flag-title="Java大作业说明文档">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/ZizhuoWang/JavaATM" target="_blank" rel="external">GitHub</a></p>
<h1 id="ATM机设计文档"><a href="#ATM机设计文档" class="headerlink" title="ATM机设计文档"></a><div align="middle"><font size="7">ATM机设计文档</font></div></h1><div align="middle"><font size="5">71115115 王子卓</font></div>

<hr>
<h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a><div align="middle">效果</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM1.png" alt=""><br><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM2.png" alt=""></p>
<p>&emsp;&emsp;服务器的守护进程启动之后可以显示在线人数和各个用户的账户总金额。<br>&emsp;&emsp;ATM机界面在没有登录的时候不可以点击存取款、查询等按钮，金额、编号文本框不可编辑。登陆之后，注册和登录按钮不可点击，用户名、密码文本框不可编辑。</p>
<hr>
<h1 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a><div align="middle">测试方法</div></h1><p>&emsp;&emsp;修改Server.java中getConnection函数中的dbURL，将&amp;user=root&amp;password=<code>******</code>修改成您的MySQL用户名和密码。</p>
<hr>
<h1 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a><div align="middle">程序结构</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/MYATM.png" alt=""></p>
<p>&emsp;&emsp;这不是一个标准的UML类图。<br>&emsp;&emsp;活期账户、半年期、一年期、五年期存款和贷款都实现了同一个Balance接口，Balance接口继承了Runnable类。活期账户、半年期、一年期、五年期存款和贷款都聚合到User类中。客户端Client和服务器Server都有User类的成员对象。<br>&emsp;&emsp;客户端Client和服务器守护进程ServerDaemon连接，由ServerDaemon动态创建Server线程。<br>&emsp;&emsp;每一笔存款自身都是线程，服务器打开之后，线程自动运行，实现加息。利息每季度结算，每季度利息是年利率开四次方。<br>&emsp;&emsp;客户端和服务器之间信息传递依靠对象输入输出流，信息载体是Command类对象和User类对象。<br>&emsp;&emsp;数据库的操作由Server类完成。<br>&emsp;&emsp;大部分对象都实现了可序列化Serializable接口，以便存入数据库。<br>&emsp;&emsp;采用了UTF-8编解码，所以<strong>支持中文</strong>。</p>
<hr>
<h1 id="数据库结构"><a href="#数据库结构" class="headerlink" title="数据库结构"></a><div align="middle">数据库结构</div></h1><ol>
<li>数据库名：atm</li>
<li>数据表名：user</li>
<li>数据表字段：<ul>
<li>name：varchar(200),非空，不可重复</li>
<li>object：longblob，非空</li>
</ul>
</li>
<li>字段作用：name负责存储用户的用户名。object负责存储用户类的对象，该对象中保存有包括用户密码在内的各种用户信息。</li>
<li>优点：在一定程度上减少数据库的读取、写入次数。用户的信息并不以明文方式呈现，在一定程度上有加密的作用。</li>
</ol>
<hr>
<h1 id="程序使用流程"><a href="#程序使用流程" class="headerlink" title="程序使用流程"></a><div align="middle">程序使用流程</div></h1><p><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/JavaATM/ATM.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/17/AMD-New-Horizon/" itemprop="url">
                  AMD New Horizon
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-17T08:30:28+08:00" content="2016-12-17">
              2016-12-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/17/AMD-New-Horizon/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/17/AMD-New-Horizon/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/17/AMD-New-Horizon/" class="leancloud_visitors" data-flag-title="AMD New Horizon">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>AMD New Horizon:</p>
<embed type="video/mp4" allowscriptaccess="always" allowfullscreen="true" wmode="transparent" quality="high" height="300" width="480" src="https://youtu.be/fMr68XznYac"><br><br><a href="https://www.youtube.com/watch?v=fMr68XznYac" target="_blank" rel="external">打不开点这里</a><br><br><embed src="http://player.youku.com/player.php/sid/XMTg2NzE1NzU4NA==/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/15/设计模式之代理模式-第三版/" itemprop="url">
                  设计模式之代理模式(第三版)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-15T15:28:49+08:00" content="2016-12-15">
              2016-12-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/15/设计模式之代理模式-第三版/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/15/设计模式之代理模式-第三版/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/15/设计模式之代理模式-第三版/" class="leancloud_visitors" data-flag-title="设计模式之代理模式(第三版)">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h1><p>&emsp;&emsp;广泛意义上讲，代理是一种类，它的作用是作为其他东西的接口。代理可以成为任何东西的接口：网络连接、内存中的大型对象、文件或者是其他不可复制或复制代价很大的资源。简短来说，代理是被客户端调用，用来访问隐藏的实体服务对象的封装类或代理对象。<br>&emsp;&emsp;代理可以简单地直接调用实体对象，也可以添加额外的逻辑。代理可以提供额外的功能，例如对资源敏感的实体对象进行缓存，或者在调用实体对象之前进行前提检查。<br>&emsp;&emsp;对于客户端而言，使用代理对象和使用实体对象是相似的，因为二者都实现了同一个接口。</p>
<h1 id="可能的应用场景"><a href="#可能的应用场景" class="headerlink" title="可能的应用场景"></a>可能的应用场景</h1><h2 id="远程代理"><a href="#远程代理" class="headerlink" title="远程代理"></a>远程代理</h2><p>&emsp;&emsp;在分布式对象通信中，本地对象是远程对象的代理对象。本地对象的方法调用的结果是远程对象的方法被调用。典型例子是ATM，ATM持有远程服务器的实体对象的代理对象。</p>
<h2 id="虚拟代理"><a href="#虚拟代理" class="headerlink" title="虚拟代理"></a>虚拟代理</h2><p>&emsp;&emsp;在一些情况下，用一个大体框架来代替复杂庞大的对象的优势是很明显的。比如当一幅图片很大时用一个虚拟代理替换它，之后按需加载。</p>
<h2 id="保护代理"><a href="#保护代理" class="headerlink" title="保护代理"></a>保护代理</h2><p>&emsp;&emsp;保护代理被用来基于访问权限，控制资源的访问。</p>
<h1 id="虚拟代理的实例"><a href="#虚拟代理的实例" class="headerlink" title="虚拟代理的实例"></a>虚拟代理的实例</h1><h2 id="图片接口"><a href="#图片接口" class="headerlink" title="图片接口"></a>图片接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Image</span> </span>&#123;</div><div class="line">	<span class="comment">//图片都可以显示</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="真实图片类"><a href="#真实图片类" class="headerlink" title="真实图片类"></a>真实图片类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> String filename = <span class="keyword">null</span>;</div><div class="line">	<span class="comment">//真实图片需要加载</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RealImage</span><span class="params">(<span class="keyword">final</span> String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.filename = name;</div><div class="line">		loadImageFromDisk();</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//加载方法</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadImageFromDisk</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"Loading   "</span> + filename);</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Displaying "</span> + filename);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="代理图片类"><a href="#代理图片类" class="headerlink" title="代理图片类"></a>代理图片类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> RealImage image = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> String filename = <span class="keyword">null</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyImage</span><span class="params">(<span class="keyword">final</span> String filename)</span> </span>&#123; </div><div class="line">        <span class="keyword">this</span>.filename = filename; </div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="comment">//懒汉式单例:只有在第一次请求实例的时候创建</span></div><div class="line">        <span class="keyword">if</span> (image == <span class="keyword">null</span>) &#123;</div><div class="line">           image = <span class="keyword">new</span> RealImage(filename);</div><div class="line">        &#125;</div><div class="line">        image.displayImage();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Image image1 = <span class="keyword">new</span> ProxyImage(<span class="string">"A"</span>);</div><div class="line">		Image image2 = <span class="keyword">new</span> ProxyImage(<span class="string">"B"</span>);</div><div class="line">		</div><div class="line">		image1.displayImage();</div><div class="line">		image1.displayImage();</div><div class="line">		image2.displayImage();</div><div class="line">		image2.displayImage();</div><div class="line">		</div><div class="line">		<span class="comment">//这一次不用再次加载</span></div><div class="line">		image1.displayImage();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/13/使用阿里云服务器搭建PPTP协议的VPN/" itemprop="url">
                  使用阿里云服务器搭建PPTP协议的VPN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-13T16:13:02+08:00" content="2016-12-13">
              2016-12-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/13/使用阿里云服务器搭建PPTP协议的VPN/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/13/使用阿里云服务器搭建PPTP协议的VPN/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/13/使用阿里云服务器搭建PPTP协议的VPN/" class="leancloud_visitors" data-flag-title="使用阿里云服务器搭建PPTP协议的VPN">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>作为运维，我手上现在有一个位于美国硅谷的阿里云ECS服务器。秉承物尽其用的原则，正好搭建一个VPN服务器。</p>
<h1 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h1><ul>
<li>CPU：1核心Haswell架构的处理器</li>
<li>内存：1GB+自己配置的4GB的Swapfile(相当于虚拟内存)</li>
<li>操作系统：Ubuntu14.04LTS 64位</li>
</ul>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="Linux平台准备"><a href="#Linux平台准备" class="headerlink" title="Linux平台准备"></a>Linux平台准备</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//安装openssh-client</div><div class="line">sudo apt install openssh-client</div><div class="line">//连接服务器</div><div class="line">//例如</div><div class="line">ssh root@127.0.0.1 //ssh 用户名@服务器的公网IP</div></pre></td></tr></table></figure>
<h2 id="Windows平台准备"><a href="#Windows平台准备" class="headerlink" title="Windows平台准备"></a>Windows平台准备</h2><ol>
<li>安装PuTTY或者XShell，想要更傻瓜操作一点可以安装WinSCP供后续使用</li>
<li>使用PuTTY或者XShell连接服务器</li>
</ol>
<h2 id="安卓平台准备"><a href="#安卓平台准备" class="headerlink" title="安卓平台准备"></a>安卓平台准备</h2><p>我就是用我的小米4C上软工课无聊配置得VPN哈哈哈哈，所以我也写一下好了</p>
<ol>
<li>安装connectBot(详见<a href="https://github.com/connectbot/connectbot" target="_blank" rel="external">GitHub</a>)</li>
<li>使用connectBot连接服务器</li>
</ol>
<h1 id="安装有关软件"><a href="#安装有关软件" class="headerlink" title="安装有关软件"></a>安装有关软件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//服务器上</div><div class="line">sudo apt install ppp iptables pptpd</div></pre></td></tr></table></figure>
<p>炒鸡简单是吧</p>
<h1 id="更改相关配置"><a href="#更改相关配置" class="headerlink" title="更改相关配置"></a>更改相关配置</h1><h2 id="更改使用的工具"><a href="#更改使用的工具" class="headerlink" title="更改使用的工具"></a>更改使用的工具</h2><h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vi /file //或者vim</div><div class="line">//用上下键移动光标到需要修改的那一行，按“i”键进入插入编辑状态，修改完成之后，按“esc”键退出编辑，直接在键盘上输入“:wq&quot;即可保存退出。</div><div class="line"></div><div class="line">//好在不一定要用vi/vim，用nano也OK</div><div class="line">nano /file</div><div class="line">//上下左右都能移动光标，除了不能用鼠标以外没什么难度。修改完成按Ctrl+X，问是否保存按Y，之后保存名称不用改直接回车。找不到就按Ctrl+W查找就是。</div></pre></td></tr></table></figure>
<p>nano的具体操作可以看<a href="http://codingstandards.iteye.com/blog/802593" target="_blank" rel="external">我使用过的Linux命令之nano - 比vi简单易用的文本编辑器</a></p>
<h3 id="图形化"><a href="#图形化" class="headerlink" title="图形化"></a>图形化</h3><p>使用WinSCP以root用户登录，使用WinSCP提供的文本编辑功能双击修改即可。修改完成之后Ctrl+S保存，问你是否覆盖，选是即可。</p>
<h2 id="修改配置文件-以使用nano为例"><a href="#修改配置文件-以使用nano为例" class="headerlink" title="修改配置文件(以使用nano为例)"></a>修改配置文件(以使用nano为例)</h2><h3 id="编辑pptpd-conf"><a href="#编辑pptpd-conf" class="headerlink" title="编辑pptpd.conf"></a>编辑pptpd.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">nano /etc/pptpd.conf</div><div class="line">//找到#localip 192.168.0.1</div><div class="line">//   #remoteip 192.168.0.234-238,192.168.0.245</div><div class="line">//删去#号即可</div></pre></td></tr></table></figure>
<h3 id="编辑options"><a href="#编辑options" class="headerlink" title="编辑options"></a>编辑options</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">nano /etc/ppp/options</div><div class="line"></div><div class="line">//搜索ms-dns，去掉搜索到的两行ms-dns前面的#，并修改为下面的字段</div><div class="line">//ms-dns 8.8.8.8</div><div class="line">//ms-dns 8.8.4.4</div></pre></td></tr></table></figure>
<h3 id="编辑chap-secrets"><a href="#编辑chap-secrets" class="headerlink" title="编辑chap-secrets"></a>编辑chap-secrets</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">nano /etc/ppp/chap-secrets</div><div class="line">//添加一行，按照下面格式输入：</div><div class="line">//用户名 pptpd 密码 *</div><div class="line">//比如 zizhuo pptpd zizhuo *</div><div class="line">//*的含义是不限制连接者的IP地址，想要限制的话改成那个IP即可</div></pre></td></tr></table></figure>
<h3 id="编辑sysctl-conf-内核文件"><a href="#编辑sysctl-conf-内核文件" class="headerlink" title="编辑sysctl.conf(内核文件)"></a>编辑sysctl.conf(内核文件)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">nano /etc/sysctl.conf</div><div class="line"></div><div class="line">//将net.ipv4.ip_forward=0</div><div class="line">//改成net.ipv4.ip_forward=1</div></pre></td></tr></table></figure>
<h2 id="添加iptables转发规则"><a href="#添加iptables转发规则" class="headerlink" title="添加iptables转发规则"></a>添加iptables转发规则</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth1 -j MASQUERADE</div></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>--table    -t table    table to manipulate (default: `filter’)</li>
<li>--append  -A chain        Append to chain</li>
<li>--source    -s address[/mask][…] source specification</li>
<li>--out-interface -o output name[+] &emsp;network interface name &emsp;eth1是阿里云服务器的连接外网的网卡，可以用ifconfig看一下哪一块网卡是外网IP就可以</li>
<li>–jump    -j target &emsp;&emsp;target for rule (may load target extension)</li>
</ul>
<h2 id="启动pptpd"><a href="#启动pptpd" class="headerlink" title="启动pptpd"></a>启动pptpd</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo service pptpd restart</div><div class="line">//或者</div><div class="line">/etc/init.d/pptpd restart</div></pre></td></tr></table></figure>
<h2 id="设置开机自启"><a href="#设置开机自启" class="headerlink" title="设置开机自启"></a>设置开机自启</h2><p>貌似现在默认就可以，不过我还是说一下吧<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//Ubutnu没有chkconfig，可以用rcconf</div><div class="line">sudo apt install rcconf</div><div class="line">rcconf on</div><div class="line">//之后会看到菜单，按空格选择开启/关闭，Tab键跳出选择OK/Cancel</div></pre></td></tr></table></figure></p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>去看看所谓的“真实世界”吧2333，下篇文章再见。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/归一化谷歌距离的计算方法/" itemprop="url">
                  归一化谷歌距离的计算方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-09T00:07:33+08:00" content="2016-12-09">
              2016-12-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/09/归一化谷歌距离的计算方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/09/归一化谷歌距离的计算方法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/09/归一化谷歌距离的计算方法/" class="leancloud_visitors" data-flag-title="归一化谷歌距离的计算方法">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="归一化谷歌距离的计算方法"><a href="#归一化谷歌距离的计算方法" class="headerlink" title="归一化谷歌距离的计算方法"></a><div align="middle"><font size="6">归一化谷歌距离的计算方法</font></div></h1><div align="middle"><font size="5">71115115 王子卓</font></div>

<hr>
<h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a><div align="middle">摘要</div></h3><p>&emsp;&emsp;归一化Google距离（Normalized Google Distance）是一种语义相似性的度量方法，由给定一组关键词集合的Google搜索引擎所返回的命中数量得出。<br>&emsp;&emsp;在自然语言中，具有相同或相似意思的两个关键字在以归一化谷歌距离为单位的情况下趋向于“接近”，意思不同的两个关键字则趋向于“疏远”。本文重点介绍如何使用Java语言和百度搜索引擎实现归一化谷歌距离的计算。<br>&emsp;&emsp;关键字：Normalized Google Distance 、 Java 、百度搜索</p>
<h3 id="1-归一化谷歌距离"><a href="#1-归一化谷歌距离" class="headerlink" title="1.归一化谷歌距离"></a>1.归一化谷歌距离</h3><h4 id="1-1定义"><a href="#1-1定义" class="headerlink" title="1.1定义"></a>1.1定义</h4><p>&emsp;&emsp;归一化谷歌距离是以搜索引擎提供的关键字搜索结果数量为计算依据，对语义相似程度的度量方法。<br>&emsp;&emsp;具体而言，两个搜索关键词之间x和y之间的归一化谷歌距离可以用下式表示：<br><img src="https://raw.githubusercontent.com/ZizhuoWang/ImageBed/master/NGD/NGD1.png" alt=""><br>&emsp;&emsp;其中：f(x)表示在搜索引擎中搜索x时返回的匹配记录数;f(y)表示在搜索引擎中搜索y时返回的匹配记录数;f(x,y)表示在搜索引擎中搜索词组(x,y)时返回的匹配记录数;M表示搜索引擎总索引量。上式中<code>log</code>均表示自然对数。</p>
<h4 id="1-2分析"><a href="#1-2分析" class="headerlink" title="1.2分析"></a>1.2分析</h4><h5 id="1-2-1取值范围"><a href="#1-2-1取值范围" class="headerlink" title="1.2.1取值范围"></a>1.2.1取值范围</h5><p>&emsp;&emsp;NGD(x,y)的取值范围为[0,∞]。如果两个搜索词x和y从未一起出现在同一网页上，而是单独出现时，则他们之间的归一化谷歌距离是无穷。如果两个词总是同时出现，则他们的归一化谷歌距离是0。<br>&emsp;&emsp;一般情况下，NGD(x,y)越接近于0，x、y越相似。如果NGD(x,y)大于等于1，则x、y之间区别很大。<br>&emsp;&emsp;特殊情况下，由于搜索引擎结果不准确，NGD(x,y)可能会小于0。</p>
<h5 id="1-2-2满足规律"><a href="#1-2-2满足规律" class="headerlink" title="1.2.2满足规律"></a>1.2.2满足规律</h5><p>&emsp;&emsp;在搜索引擎足够准确的情况下</p>
<ul>
<li>NGD(x,x)等于0，满足同一律。</li>
<li>NGD(x,y)等于NGD(y,x)，满足交换律。</li>
</ul>
<h5 id="1-2-3尺度不变性"><a href="#1-2-3尺度不变性" class="headerlink" title="1.2.3尺度不变性"></a>1.2.3尺度不变性</h5><p>&emsp;&emsp;归一化谷歌距离具有尺度不变性。设想如果搜索引擎总的索引量M增长了n倍，那么f(x)、f(y)、f(x,y)也应该增长n倍。这是因为归一化谷歌距离提供给我们搜索关键字之间客观语义联系，当M以一个不确定的比例增长时，NGD(x,y)应该保持稳定。</p>
<h3 id="2-利用百度搜索引擎和Java语言实现谷歌距离的计算"><a href="#2-利用百度搜索引擎和Java语言实现谷歌距离的计算" class="headerlink" title="2.利用百度搜索引擎和Java语言实现谷歌距离的计算"></a>2.利用百度搜索引擎和Java语言实现谷歌距离的计算</h3><h4 id="2-1设计思路"><a href="#2-1设计思路" class="headerlink" title="2.1设计思路"></a>2.1设计思路</h4><ul>
<li>NormalizedGoogleDistance类<ul>
<li>公有静态函数NGD(String a,String b),返回值为Double类型。作用是获取网页的源代码，使用searchResult函数获得三种情况下搜索索引个数，并且将值传递给Calculate函数做计算。</li>
<li>私有静态函数searchResult(String name)，返回值为Double类型。使用正则表达式得到索引个数。</li>
<li>私有静态函数Calculate(Double numA,Double numB,Double numC)，返回值为Double类型。计算并返回归一化谷歌距离的计算结果。</li>
<li>公有静态函数main(String[] args)，返回值为空。接受从命令行传来的两个关键字参数，调用NGD函数计算结果并输出。</li>
</ul>
</li>
</ul>
<h4 id="2-2具体实现"><a href="#2-2具体实现" class="headerlink" title="2.2具体实现"></a>2.2具体实现</h4><h5 id="2-2-1主体实现"><a href="#2-2-1主体实现" class="headerlink" title="2.2.1主体实现"></a>2.2.1主体实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> java.net.URLConnection;</div><div class="line"><span class="keyword">import</span> java.util.regex.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalizedGoogleDistance</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> String regex = <span class="string">"百度为您找到相关结果约(.*)个"</span>;</div><div class="line">	<span class="keyword">static</span> Pattern pattern = Pattern.compile(regex);</div><div class="line">	<span class="keyword">static</span> String url = <span class="string">"http://www.baidu.com/s?wd="</span>;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> name</div><div class="line">	 * <span class="doctag">@return</span> 搜索到的网页数量</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Double <span class="title">searchResult</span><span class="params">(String name)</span></span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			URL baiduURL = <span class="keyword">new</span> URL(url+name);</div><div class="line">			URLConnection connection = baiduURL.openConnection();</div><div class="line">			BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(connection.getInputStream()));</div><div class="line">			<span class="comment">//逐行筛选匹配正则表达式，并将结果中的逗号删除，之后转化成数字。</span></div><div class="line">			String html = in.readLine();</div><div class="line">			<span class="keyword">while</span>(html!=<span class="keyword">null</span>)&#123;</div><div class="line">				Matcher matcher = pattern.matcher(html);</div><div class="line">				<span class="keyword">while</span>(matcher.find())&#123;</div><div class="line">					System.out.println(name.replaceAll(<span class="string">"%20"</span>, <span class="string">" "</span>)+<span class="string">": "</span>+matcher.group(<span class="number">1</span>));<span class="comment">//格式优化</span></div><div class="line">					String temp = matcher.group(<span class="number">1</span>);</div><div class="line">					<span class="keyword">return</span> Double.parseDouble(temp.replaceAll(<span class="string">","</span>, <span class="string">""</span>));</div><div class="line">				&#125;</div><div class="line">				html = in.readLine();</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="number">0.0</span>;<span class="comment">//有可能没有返回值，所以默认写一个0.0</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> a</div><div class="line">	 * <span class="doctag">@param</span> b</div><div class="line">	 * <span class="doctag">@return</span> The result of NGD</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Double <span class="title">NGD</span><span class="params">(String a,String b)</span></span>&#123;</div><div class="line">		<span class="comment">//删去空格，以防搜索出错</span></div><div class="line">		a=a.replaceAll(<span class="string">" "</span>, <span class="string">""</span>);</div><div class="line">		b=b.replaceAll(<span class="string">" "</span>, <span class="string">""</span>);</div><div class="line">		<span class="comment">//正则表达式匹配个数</span></div><div class="line">		</div><div class="line">		<span class="comment">//用于存三次搜索各自的索引量</span></div><div class="line">		Double numA,numB,numC;</div><div class="line">		numA=<span class="number">1.0</span>;numB=<span class="number">1.0</span>;numC=<span class="number">1.0</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			numA = searchResult(a);</div><div class="line">			numB = searchResult(b);</div><div class="line">			numC = searchResult(a+<span class="string">"%20"</span>+b);</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//返回Calculate函数的计算结果</span></div><div class="line">		<span class="keyword">return</span> Calculate(numA, numB, numC);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> numA</div><div class="line">	 * <span class="doctag">@param</span> numB</div><div class="line">	 * <span class="doctag">@param</span> numC</div><div class="line">	 * <span class="doctag">@return</span> NGD公式计算结果</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Double <span class="title">Calculate</span><span class="params">(Double numA,Double numB,Double numC)</span></span>&#123;</div><div class="line">		Double lnx = Math.log(numA);</div><div class="line">		Double lny = Math.log(numB);</div><div class="line">		Double lnSum = Math.log(<span class="number">25270000000.0</span>);<span class="comment">//由于不知具体数值，这里取谷歌搜素最大索引限制</span></div><div class="line">		Double lnxy = Math.log(numC);</div><div class="line">		<span class="comment">//NGD公式</span></div><div class="line">		<span class="keyword">if</span> (lnx&gt;lny) &#123;</div><div class="line">			<span class="keyword">return</span> (lnx-lnxy)/(lnSum-lny);</div><div class="line">		&#125;<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> (lny-lnxy)/(lnSum-lnx);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 * 从外部传进两个参数作为关键字，并将结果输出</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Double result = NGD(args[<span class="number">0</span>], args[<span class="number">1</span>]);</div><div class="line">		System.out.println(<span class="string">"NGD: "</span>+result);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="2-2-2界面实现"><a href="#2-2-2界面实现" class="headerlink" title="2.2.2界面实现"></a>2.2.2界面实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.awt.Dimension;</div><div class="line"><span class="keyword">import</span> java.awt.FlowLayout;</div><div class="line"><span class="keyword">import</span> java.awt.GridLayout;</div><div class="line"><span class="keyword">import</span> java.awt.Toolkit;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.swing.JButton;</div><div class="line"><span class="keyword">import</span> javax.swing.JFrame;</div><div class="line"><span class="keyword">import</span> javax.swing.JLabel;</div><div class="line"><span class="keyword">import</span> javax.swing.JPanel;</div><div class="line"><span class="keyword">import</span> javax.swing.JTextField;</div><div class="line"><span class="keyword">import</span> javax.swing.UIManager;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NGDUI</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NGDUI</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//初始化应用标题和标签</span></div><div class="line">		JFrame frame = <span class="keyword">new</span> JFrame(<span class="string">"Normalized Google Distance"</span>);</div><div class="line">		JLabel label1 = <span class="keyword">new</span> JLabel(<span class="string">"参数一"</span>);</div><div class="line">		JLabel label2 = <span class="keyword">new</span> JLabel(<span class="string">"参数二"</span>);</div><div class="line">		JLabel label3 = <span class="keyword">new</span> JLabel(<span class="string">"结果"</span>);</div><div class="line">		<span class="comment">//三行一列的网格布局</span></div><div class="line">		frame.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">3</span>, <span class="number">1</span>));</div><div class="line">		<span class="comment">//第一行流式布局</span></div><div class="line">		JPanel panel1 = <span class="keyword">new</span> JPanel();</div><div class="line">		panel1.setLayout(<span class="keyword">new</span> FlowLayout());</div><div class="line">		panel1.add(label1);</div><div class="line">		JTextField textField1 = <span class="keyword">new</span> JTextField(<span class="number">20</span>);</div><div class="line">		panel1.add(textField1);</div><div class="line">		<span class="comment">//第二行流式布局</span></div><div class="line">		JPanel panel2 = <span class="keyword">new</span> JPanel();</div><div class="line">		panel2.setLayout(<span class="keyword">new</span> FlowLayout());</div><div class="line">		panel2.add(label2);</div><div class="line">		JTextField textField2 = <span class="keyword">new</span> JTextField(<span class="number">20</span>);</div><div class="line">		panel2.add(textField2);</div><div class="line">		<span class="comment">//第三行流式布局</span></div><div class="line">		JPanel panel3 = <span class="keyword">new</span> JPanel();</div><div class="line">		panel3.setLayout(<span class="keyword">new</span> FlowLayout());</div><div class="line">		panel3.add(label3);</div><div class="line">		JTextField textField3 = <span class="keyword">new</span> JTextField(<span class="number">20</span>);</div><div class="line">		textField3.setEditable(<span class="keyword">false</span>);<span class="comment">//结果框不可更改</span></div><div class="line">		panel3.add(textField3);</div><div class="line">		JButton query = <span class="keyword">new</span> JButton(<span class="string">"查询"</span>);<span class="comment">//查询按钮</span></div><div class="line">		<span class="comment">//给查询按钮加上事件监听器</span></div><div class="line">		query.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">			</div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</div><div class="line">				textField3.setText(String.valueOf(</div><div class="line">						NormalizedGoogleDistance.NGD(</div><div class="line">								textField1.getText(),textField2.getText() )));				</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		panel3.add(query);</div><div class="line">		</div><div class="line">		frame.setSize(<span class="number">300</span>, <span class="number">300</span>);</div><div class="line">		<span class="comment">//设置窗口居中</span></div><div class="line">		Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();</div><div class="line">		frame.setLocation((dimension.width-frame.getWidth())/<span class="number">2</span>, </div><div class="line">				(dimension.height-frame.getHeight())/<span class="number">2</span>);</div><div class="line">		<span class="comment">//添加到网格布局中</span></div><div class="line">		frame.add(panel1);frame.add(panel2);frame.add(panel3);</div><div class="line">		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</div><div class="line">		frame.setVisible(<span class="keyword">true</span>);</div><div class="line">		frame.setResizable(<span class="keyword">false</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">//设置皮肤</span></div><div class="line">			UIManager.setLookAndFeel(<span class="string">"com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel"</span>);</div><div class="line">			NGDUI ui = <span class="keyword">new</span> NGDUI();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p>【1】RudiL.Cilibrasi and PaulM.B.Vitanyi. <em>The Google Similarity Distance</em> 【J】IEEE TRANSACTIONS ON KNOWLEDGE AND DATA ENGINEERING, VOL.19, NO3, MARCH2007, P370–383<br>【2】张玉芳,艾东梅,黄 涛,熊忠阳.<em>结合编辑距离和Google距离的语义标注方法</em> 【A】计算机应用研究，2010年2月，第二期，第二十七卷<br>【3】匿名. <em>Normalized Google distance</em>，维基百科，<a href="https://en.wikipedia.org/wiki/Normalized_Google_distance" target="_blank" rel="external">https://en.wikipedia.org/wiki/Normalized_Google_distance</a><br>【4】pinyangtenglong的专栏. <em>归一化Google距离（Normalized Google Distance）</em>，CSDN博客，<a href="http://blog.csdn.net/pinyangtenglong/article/details/26963015" target="_blank" rel="external">http://blog.csdn.net/pinyangtenglong/article/details/26963015</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars0.githubusercontent.com/u/22298419?v=3&u=12cc559f5bea926634e500e76e8e3da9b699c959&s=400"
               alt="王子卓" />
          <p class="site-author-name" itemprop="name">王子卓</p>
          <p class="site-description motion-element" itemprop="description">理路上事，勿惮其难而稍为退步，一退步便远隔千山。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王子卓</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zizhuowang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("oNJjTL7jM33iRBxHld63N3z1-gzGzoHsz", "uqK0i0RTln8eoNQgV71yGxLy");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
